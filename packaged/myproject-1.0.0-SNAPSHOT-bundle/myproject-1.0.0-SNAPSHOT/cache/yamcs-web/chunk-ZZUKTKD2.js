import{a as H,b as Q}from"./chunk-L67MW52F.js";import{Aa as w,Bf as G,Ca as q,Cb as D,Dg as O,Ea as u,F as k,Fh as W,G as R,Gb as j,Gh as J,Hh as K,Jb as F,Kf as L,Ra as r,Rc as z,Ta as S,Ua as E,Ug as U,V as a,Y as m,Za as Y,_ as P,a as b,b as T,bb as g,cb as x,f as v,ka as p,kg as N,lf as B,ma as d,na as I,oa as M,pa as $,pg as V,qa as _,ra as c,sa as s,sb as A,ta as C}from"./chunk-OXOWQRWE.js";var Z=i=>({c:i});function ee(i,t){i&1&&r(0," results ")}function te(i,t){i&1&&r(0," result ")}function ie(i,t){if(i&1&&(c(0,"div")(1,"mat-icon",3),r(2,"toll"),s(),c(3,"a",4),r(4),s(),C(5,"br"),s()),i&2){let e=t.$implicit,n=u(2);a(3),_("routerLink",e.link)("queryParams",Y(3,Z,n.yamcs.context)),a(),S(" ",e.label," ")}}function ne(i,t){if(i&1){let e=w();c(0,"ya-toolbar",2)(1,"ya-button",5),q("click",function(){k(e);let o=u(2);return R(o.loadMoreData())}),r(2," Load more "),s()()}if(i&2){let e=u();a(),_("disabled",!e.continuationToken)}}function oe(i,t){if(i&1&&(c(0,"div",1),r(1),p(2,ee,1,0)(3,te,1,0),r(4),g(5,"async"),s(),M(6,ie,6,5,"div",null,I),p(8,ne,3,1,"ya-toolbar",2)),i&2){let e=t,n=u();a(),E(" Showing ",e.resources.length," of ",e.totalSize," "),a(),d(e.totalSize!==1?2:3),a(2),S(' for "',x(5,5,n.term$),'". '),a(2),$(e.resources),a(2),d(e.resources.length?8:-1)}}var l=class l{constructor(t,e,n,o){this.yamcs=t;this.messageService=o;this.term$=new v(null);this.result$=new v(null);e.setTitle("Search"),n.queryParamMap.subscribe(X=>{let y=X.get("q")??"";this.fetchPage(y).then(f=>{this.term$.next(y),this.result$.next({resources:this.toResources(f.parameters||[]),totalSize:f.totalSize,continuationToken:f.continuationToken})})})}loadMoreData(){let t=this.term$.value??"",e=this.result$.value?.continuationToken;this.fetchPage(t,e).then(n=>{let o=this.result$.value;o.resources=[...o.resources,...this.toResources(n.parameters||[])],this.result$.next(T(b({},o),{continuationToken:n.continuationToken}))})}toResources(t){return t.map(e=>({label:e.qualifiedName,type:"Parameter",link:["/telemetry/parameters"+e.qualifiedName]}))}fetchPage(t,e){let n=this.yamcs.yamcsClient.getParameters(this.yamcs.instance,{q:t,next:e,limit:50,searchMembers:!0});return n.catch(o=>this.messageService.showError(o)),n}};l.\u0275fac=function(e){return new(e||l)(m(L),m(D),m(j),m(B))},l.\u0275cmp=P({type:l,selectors:[["ng-component"]],decls:5,vars:3,consts:[["label","Search results"],[2,"margin-bottom","1em"],["appearance","bottom","align","center"],[1,"icon12",2,"vertical-align","middle","margin-right","4px"],[1,"ya-link",3,"routerLink","queryParams"],[3,"click","disabled"]],template:function(e,n){if(e&1&&(c(0,"ya-instance-page"),C(1,"ya-instance-toolbar",0),c(2,"ya-panel"),p(3,oe,9,7),g(4,"async"),s()()),e&2){let o;a(3),d((o=x(4,1,n.result$))?3:-1,o)}},dependencies:[W,F,z,G,N,V,O,U,A],encapsulation:2,changeDetection:0});var h=l;var be=[{path:"",canActivate:[J,H],canActivateChild:[K],runGuardsAndResolvers:"always",component:Q,children:[{path:"",pathMatch:"full",component:h}]}];export{be as ROUTES};
