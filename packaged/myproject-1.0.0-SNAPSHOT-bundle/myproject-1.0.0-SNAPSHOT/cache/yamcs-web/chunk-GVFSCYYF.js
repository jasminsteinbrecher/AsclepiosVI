import{a as w,b}from"./chunk-OXOWQRWE.js";var Ve=e=>e,Qe=class{constructor(e,t=Ve){this.easing=t,this._value=e}_value;time0;src;dst;duration=200;setTransition(e,t){e===void 0?this._value=t:(this.time0=e,this.src=this.value,this.dst=t)}step(e){if(this.dst!==void 0&&this.dst!==this.value){let t=Math.min((e-this.time0)/this.duration,1);return t=this.easing(t),this._value=this.src+(this.dst-this.src)*t,e-this.time0>this.duration&&this.completeTransition(),!0}return!1}get value(){return this._value}set value(e){this.abortTransition(),this._value=e}abortTransition(){this.time0=void 0,this.src=void 0,this.dst=void 0}completeTransition(){this.dst!==void 0&&(this._value=this.dst,this.abortTransition())}},Je=class{constructor(e,t){this.timeline=t,this.id=e}id;cursor="col-resize";grabStartCursor;mouseDown(){this.grabStartCursor=this.timeline.cursor}grab(e){this.timeline.sidebar&&(this.timeline.cursor="col-resize",this.timeline.sidebar.width=e.x)}grabEnd(){this.timeline.cursor=this.grabStartCursor||this.timeline.cursor}},c=class Fe{segments=[];constructor(t,i){this.segments.push({x:t,y:i,line:!1})}static fromPoints(t){let i=new Fe(t[0].x,t[0].y);for(let r=1;r<t.length;r++)i.lineTo(t[r].x,t[r].y);return i}getBoundingBox(){let t={x:this.segments[0].x,y:this.segments[0].y},i={x:this.segments[0].x,y:this.segments[0].y};for(let r=0;r<this.segments.length;r++){let n=this.segments[r];n.x<t.x&&(t.x=n.x),n.x>i.x&&(i.x=n.x),n.y<t.y&&(t.y=n.y),n.y>i.y&&(i.y=n.y)}return{x:t.x,y:t.y,width:i.x-t.x,height:i.y-t.y}}lineTo(t,i){return this.segments.push({x:t,y:i,line:!0}),this}moveTo(t,i){return this.segments.push({x:t,y:i,line:!1}),this}closePath(){let t=this.segments[0];return this.segments.push({x:t.x,y:t.y,line:!0}),this}translate(t,i){for(let r of this.segments)r.x+=t,r.y+=i;return this}},de=class{_data;mutationListeners=[];timeline;constructor(e){this.timeline=e,e.add(this)}get data(){return this._data}set data(e){this._data=e,this.reportMutation()}addMutationListener(e){this.mutationListeners.indexOf(e)===-1&&this.mutationListeners.push(e)}removeMutationListener(e){let t=this.mutationListeners.indexOf(e);t!==-1&&this.mutationListeners.splice(t,1)}reportMutation(){this.mutationListeners.forEach(e=>e()),this.timeline.requestRepaint()}createAnimatableProperty(e){return this.timeline.createAnimatableProperty(e)}beforeDraw(e){}drawUnderlay(e){}drawContent(e){}drawOverlay(e){}disconnectedCallback(){}},Ee=class extends de{_width=200;_background="white";_clippedWidth=this.createAnimatableProperty(this._width);_opened=!0;get width(){return this._width}set width(e){this._opened=!0,this._width=e,this._clippedWidth.value=Math.max(0,e),this.reportMutation()}get background(){return this._background}set background(e){this._background=e,this.reportMutation()}get clippedWidth(){return this._clippedWidth.value}toggle(){this.opened?this.close():this.open()}open(){this.opened||(this._opened=!0,this._clippedWidth.setTransition(this.timeline.frameTime,this._width),this.reportMutation())}close(){this.opened&&(this._opened=!1,this._clippedWidth.setTransition(this.timeline.frameTime,0),this.reportMutation())}get opened(){return this._opened}},et=class extends Ee{_dividerColor="#e3e3e3";_foregroundColor="#333333";_fontFamily="Verdana, Geneva, sans-serif";_textSize=10;_overlayColor="transparent";_hoverOverlayColor="rgba(170, 170, 170, 0.3)";hoveredIndex;drawContent(e){if(this.clippedWidth){let t=e.createChild(this.clippedWidth,e.canvas.height);this.drawOffscreen(t),e.copy(t,0,0)}}drawOffscreen(e){e.fillRect({x:0,y:0,width:this.clippedWidth,height:e.height,fill:this.timeline.background});let t=this.timeline.getBands().filter(r=>r.frozen).concat(this.timeline.getBands().filter(r=>!r.frozen));for(let r=0;r<t.length;r++){let n=t[r];this.drawBand(e,n,r)}e.fillRect({x:0,y:0,width:this.clippedWidth,height:e.height,fill:this.overlayColor});for(let r of t)if(r.label){let n=r.height-r.paddingTop-r.paddingBottom;e.fillText({x:5,y:r.y+r.paddingTop+n/2,align:"left",baseline:"middle",color:this.foregroundColor,font:`${this.textSize}px ${this.fontFamily}`,text:r.label})}let i=this.clippedWidth-.5;e.strokePath({color:this.dividerColor,path:new c(i,0).lineTo(i,e.height)})}drawBand(e,t,i){if(e.fillRect({x:0,y:t.y,width:this.width,height:t.height,fill:t.background}),e.fillRect({x:0,y:t.y,width:this.width,height:t.height,fill:t.headerBackground}),this.hoveredIndex===i&&e.fillRect({x:0,y:t.y,width:this.width,height:t.height,fill:this.hoverOverlayColor}),t.headerClickListeners.length||t.headerMouseEnterListeners.length||t.headerMouseMoveListeners.length||t.headerMouseLeaveListeners.length){let n={id:`band-${i}-header`,cursor:t.headerClickListeners.length?"pointer":"default",mouseEnter:o=>{this.hoveredIndex=i,this.reportMutation(),t.headerMouseEnterListeners.forEach(s=>s({clientX:o.clientX,clientY:o.clientY,band:t}))},mouseMove:o=>{t.headerMouseMoveListeners.forEach(s=>s({clientX:o.clientX,clientY:o.clientY,band:t,time:0}))},mouseLeave:o=>{this.hoveredIndex=void 0,this.reportMutation(),t.headerMouseLeaveListeners.forEach(s=>s({clientX:o.clientX,clientY:o.clientY,band:t}))},click:()=>{t.headerClickListeners.forEach(o=>o({band:t}))}};e.addHitRegion(n).addRect(0,t.y,this.width,t.height)}let r=t.borderWidth??this.timeline.bandBorderWidth;if(r){let n=t.y+t.height+r/2;e.strokePath({color:t.borderColor||this.timeline.bandBorderColor,lineWidth:r,path:new c(0,n).lineTo(this.clippedWidth,n)})}}get foregroundColor(){return this._foregroundColor}set foregroundColor(e){this._foregroundColor=e,this.reportMutation()}get dividerColor(){return this._dividerColor}set dividerColor(e){this._dividerColor=e,this.reportMutation()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.reportMutation()}get textSize(){return this._textSize}set textSize(e){this._textSize=e,this.reportMutation()}get overlayColor(){return this._overlayColor}set overlayColor(e){this._overlayColor=e,this.reportMutation()}get hoverOverlayColor(){return this._hoverOverlayColor}set hoverOverlayColor(e){this._hoverOverlayColor=e,this.reportMutation()}},se=e=>{document.removeEventListener("click",se,!0),e.preventDefault(),e.stopPropagation()};function Q(e){return(e.buttons&1)===1||e.buttons===void 0&&e.which==1}var N=5;function ge(e,t,i,r){return Math.sqrt((i-e)*(i-e)+(r-t)*(r-t))}var tt=class{constructor(e,t){this.canvas=e,this.hitCanvas=t,e.addEventListener("click",i=>this.onCanvasClick(i),!1),e.addEventListener("dblclick",i=>this.onCanvasDoubleClick(i),!1),e.addEventListener("contextmenu",i=>this.onCanvasContextMenu(i),!1),e.addEventListener("keydown",i=>this.onCanvasKeyDown(i),!1),e.addEventListener("keyup",i=>this.onCanvasKeyUp(i),!1),e.addEventListener("mousedown",i=>this.onCanvasMouseDown(i),!1),e.addEventListener("mouseup",i=>this.onCanvasMouseUp(i),!1),e.addEventListener("mouseleave",i=>this.onCanvasMouseLeave(i),!1),e.addEventListener("mousemove",i=>this.onCanvasMouseMove(i),!1),e.addEventListener("touchstart",i=>this.onCanvasTouchStart(i),!1),e.addEventListener("touchmove",i=>this.onCanvasTouchMove(i),!1),e.addEventListener("wheel",i=>this.onCanvasWheel(i),!1)}grabbing=!1;grabTarget;grabPoint;grabbingPoint;documentMouseMoveListener=e=>this.onDocumentMouseMove(e);documentMouseUpListener=e=>this.onDocumentMouseUp(e);documentTouchMoveListener=e=>this.onDocumentTouchMove(e);documentTouchEndListener=e=>this.onDocumentTouchEnd(e);prevActiveRegions=[];onCanvasClick(e){let t=this.toMouseHitEvent(e),i=this.hitCanvas.getActiveRegion(t.x,t.y,"click");i&&(i.click(t),e.preventDefault(),e.stopPropagation())}onCanvasDoubleClick(e){let t=this.toMouseHitEvent(e),i=this.hitCanvas.getActiveRegion(t.x,t.y,"doubleClick");i&&(i.doubleClick(t),e.preventDefault(),e.stopPropagation())}onCanvasKeyDown(e){let t=this.toKeyboardHitEvent(e);for(let i of this.hitCanvas.getRegionsForProperty("keyDown"))i.keyDown(t)}onCanvasKeyUp(e){let t=this.toKeyboardHitEvent(e);for(let i of this.hitCanvas.getRegionsForProperty("keyUp"))i.keyUp(t)}onCanvasContextMenu(e){let t=this.toMouseHitEvent(e),i=this.hitCanvas.getActiveRegion(t.x,t.y,"contextMenu");i&&(i.contextMenu(t),e.preventDefault(),e.stopPropagation())}onCanvasMouseDown(e){document.removeEventListener("click",se,!0);let t=this.toMouseHitEvent(e);if(Q(e)){let{x:i,y:r}=t,n=this.hitCanvas.getActiveRegion(i,r,"mouseDown");n&&n.mouseDown(t);let o=this.hitCanvas.getActiveRegion(i,r,"grab");o&&(this.grabPoint=this.grabbingPoint={x:i,y:r},this.grabTarget=o),e.stopPropagation()}}onCanvasMouseUp(e){let t=this.toMouseHitEvent(e),i=this.hitCanvas.getActiveRegion(t.x,t.y,"mouseUp");i&&(i.mouseUp(t),e.preventDefault(),e.stopPropagation())}onCanvasMouseLeave(e){let t=this.toMouseHitEvent(e);for(let i of this.prevActiveRegions)i.mouseLeave&&i.mouseLeave(t);this.prevActiveRegions=[],e.preventDefault(),e.stopPropagation()}wasActive(e){for(let t of this.prevActiveRegions)if(t.id===e.id)return!0;return!1}onCanvasMouseMove(e){let t=this.toMouseHitEvent(e),{x:i,y:r}=t,n=this.hitCanvas.getActiveRegions(i,r),o=n.map(l=>l.id);for(let l of this.prevActiveRegions)o.indexOf(l.id)===-1&&l.mouseLeave&&l.mouseLeave(t);let s=this.hitCanvas.getActiveRegions(i,r,"mouseEnter");for(let l=s.length-1;l>=0;l--){let h=s[l];this.wasActive(h)||h.mouseEnter(t)}for(let l of this.hitCanvas.getActiveRegions(i,r,"mouseMove"))l.mouseMove(t);this.prevActiveRegions=n;let a=this.hitCanvas.getActiveRegion(i,r,"cursor")?.cursor||"auto";if(a!==this.canvas.style.cursor&&(this.canvas.style.cursor=a),this.grabPoint&&!this.grabbing&&Q(e)){let l=ge(this.grabPoint.x,this.grabPoint.y,i,r);Math.abs(l)>N&&(document.addEventListener("click",se,!0),document.addEventListener("mouseup",this.documentMouseUpListener),document.addEventListener("mousemove",this.documentMouseMoveListener),this.grabbing=!0,N>0&&this.grabPoint&&(this.grabPoint=this.grabbingPoint={x:i,y:r}))}this.grabbing&&this.grabTarget&&Q(e)&&(e.preventDefault(),e.stopPropagation(),this.grabTarget.grab(this.toGrabHitEvent(e)),this.grabbingPoint={x:i,y:r})}onCanvasTouchStart(e){let t=this.toTouchHitEvent(e),{x:i,y:r}=t.touches[0];if(t.touches.length===1){let n=this.hitCanvas.getActiveRegion(i,r,"grab");n&&(this.grabPoint=this.grabbingPoint={x:i,y:r},this.grabTarget=n)}e.stopPropagation()}onCanvasTouchMove(e){let t=this.toTouchHitEvent(e),{x:i,y:r}=t.touches[0];if(this.grabPoint&&!this.grabbing&&e.touches.length===1){let n=ge(this.grabPoint.x,this.grabPoint.y,i,r);Math.abs(n)>N&&(document.addEventListener("touchend",this.documentTouchEndListener),document.addEventListener("touchmove",this.documentTouchMoveListener),this.grabbing=!0,N>0&&this.grabPoint&&(this.grabPoint=this.grabbingPoint={x:i,y:r}))}if(this.grabbing&&this.grabTarget&&e.touches.length===1){e.preventDefault(),e.stopPropagation();let n={clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,x:t.touches[0].x,y:t.touches[0].y,deltaX:i-this.grabPoint.x,deltaY:r-this.grabPoint.y,movementX:i-this.grabbingPoint.x,movementY:r-this.grabbingPoint.y,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey};this.grabTarget.grab(n),this.grabbingPoint={x:i,y:r}}}onCanvasWheel(e){let t=this.toMouseHitEvent(e),{x:i,y:r}=t,n=this.hitCanvas.getActiveRegion(i,r,"wheel");n&&(n.wheel(b(w({},t),{deltaX:e.deltaX,deltaY:e.deltaY})),e.preventDefault(),e.stopPropagation())}onDocumentMouseUp(e){if(this.grabbing){document.removeEventListener("mouseup",this.documentMouseUpListener),document.removeEventListener("mousemove",this.documentMouseMoveListener);let t=this.grabTarget;this.grabbing=!1,this.grabPoint=void 0,this.grabTarget=void 0,t?.grabEnd&&t.grabEnd()}}onDocumentMouseMove(e){this.onCanvasMouseMove(e)}onDocumentTouchEnd(e){if(this.grabbing){document.removeEventListener("touchend",this.documentTouchEndListener),document.removeEventListener("touchmove",this.documentTouchMoveListener);let t=this.grabTarget;this.grabbing=!1,this.grabPoint=void 0,this.grabTarget=void 0,t?.grabEnd&&t.grabEnd()}}onDocumentTouchMove(e){this.onCanvasTouchMove(e)}toMouseHitEvent(e){let t=this.canvas.getBoundingClientRect();return{clientX:e.clientX,clientY:e.clientY,x:e.clientX-t.left,y:e.clientY-t.top,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,button:e.button}}toTouchHitEvent(e){let t=this.canvas.getBoundingClientRect(),i=[];for(let r of e.touches)i.push({clientX:r.clientX,clientY:r.clientY,x:r.clientX-t.left,y:r.clientY-t.top});return{touches:i,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey}}toGrabHitEvent(e){let t=this.toMouseHitEvent(e);return b(w({},t),{deltaX:t.x-this.grabPoint.x,deltaY:t.y-this.grabPoint.y,movementX:t.x-this.grabbingPoint.x,movementY:t.y-this.grabbingPoint.y})}toKeyboardHitEvent(e){return{code:e.code,key:e.key,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey}}},fe="rgb(255,255,255)",it=!!navigator.brave,rt=class ze{constructor(t,i,r){this.parent=t;let n=document.createElement("canvas");n.width=i||n.width,n.height=r||n.height,this.ctx=n.getContext("2d",{willReadFrequently:!0});let o=t;for(;o;)this.root=o,o=o.parent}ctx;regionsById=new Map;regionsByColor=new Map;root;clear(){this.regionsById.clear(),this.regionsByColor.clear(),this.ctx.fillStyle=fe,this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}beginHitRegion(t){(this.root||this).regionsById.set(t.id,t);let i=(this.root||this).generateUniqueColor(t);return this.ctx.beginPath(),this.ctx.fillStyle=i,i}getActiveRegion(t,i,r){let n=this.ctx.getImageData(t,i,1,1).data,o=`rgb(${n[0]},${n[1]},${n[2]})`,s=this.regionsByColor.get(o)||void 0;return s&&r?this.findAncestorForProperty(s,r):s}getActiveRegions(t,i,r){let n=this.getActiveRegion(t,i,r),o=[];if(n)for(o.push(n);n?.parentId;)n=this.regionsById.get(n?.parentId),n&&(r===void 0||n[r]!==void 0)&&o.push(n);return o}findAncestorForProperty(t,i){if(t[i]!==void 0)return t;let r=t;for(;r?.parentId;)if(r=this.regionsById.get(r.parentId),r&&r[i]!==void 0)return r}getRegionsForProperty(t){let i=[];for(let r of this.regionsById.values())r[t]!==void 0&&i.push(r);return i}drawRegions(t,i,r){t.drawImage(this.ctx.canvas,i,r)}createChild(t,i){return new ze(this,t,i)}transferTo(t,i,r,n,o){t.drawImage(this.ctx.canvas,i,r,n,o)}generateUniqueColor(t){for(;;){let i=Math.round(Math.random()*255),r=Math.round(Math.random()*255),n=Math.round(Math.random()*255),o=`rgb(${i},${r},${n})`;if(!this.regionsByColor.has(o)&&o!==fe)return it?(this.regionsByColor.set(`rgb(${i-1},${r-1},${n-1})`,t),this.regionsByColor.set(`rgb(${i-1},${r-1},${n})`,t),this.regionsByColor.set(`rgb(${i-1},${r-1},${n+1})`,t),this.regionsByColor.set(`rgb(${i-1},${r},${n-1})`,t),this.regionsByColor.set(`rgb(${i-1},${r},${n})`,t),this.regionsByColor.set(`rgb(${i-1},${r},${n+1})`,t),this.regionsByColor.set(`rgb(${i-1},${r+1},${n-1})`,t),this.regionsByColor.set(`rgb(${i-1},${r+1},${n})`,t),this.regionsByColor.set(`rgb(${i-1},${r+1},${n+1})`,t),this.regionsByColor.set(`rgb(${i},${r-1},${n-1})`,t),this.regionsByColor.set(`rgb(${i},${r-1},${n})`,t),this.regionsByColor.set(`rgb(${i},${r-1},${n+1})`,t),this.regionsByColor.set(`rgb(${i},${r},${n-1})`,t),this.regionsByColor.set(`rgb(${i},${r},${n})`,t),this.regionsByColor.set(`rgb(${i},${r},${n+1})`,t),this.regionsByColor.set(`rgb(${i},${r+1},${n-1})`,t),this.regionsByColor.set(`rgb(${i},${r+1},${n})`,t),this.regionsByColor.set(`rgb(${i},${r+1},${n+1})`,t),this.regionsByColor.set(`rgb(${i+1},${r-1},${n-1})`,t),this.regionsByColor.set(`rgb(${i+1},${r-1},${n})`,t),this.regionsByColor.set(`rgb(${i+1},${r-1},${n+1})`,t),this.regionsByColor.set(`rgb(${i+1},${r},${n-1})`,t),this.regionsByColor.set(`rgb(${i+1},${r},${n})`,t),this.regionsByColor.set(`rgb(${i+1},${r},${n+1})`,t),this.regionsByColor.set(`rgb(${i+1},${r+1},${n-1})`,t),this.regionsByColor.set(`rgb(${i+1},${r+1},${n})`,t),this.regionsByColor.set(`rgb(${i+1},${r+1},${n+1})`,t)):this.regionsByColor.set(o,t),o}}},nt=class{constructor(e){this.ctx=e}addRect(e,t,i,r){return this.ctx.fillRect(e,t,i,r),this}addEllipse(e,t,i,r,n,o,s,a){this.ctx.beginPath(),this.ctx.ellipse(e,t,i,r,n,o,s,a),this.ctx.fill()}addPath(e){this.ctx.beginPath();for(let t of e.segments)t.line?this.ctx.lineTo(t.x,t.y):this.ctx.moveTo(t.x,t.y);this.ctx.fill()}};function Re(e,t,i){return i===void 0&&(i=t),{x:e.x+i,y:e.y+t,width:e.width-(i+i),height:e.height-(t+t)}}var pe=class $e{constructor(t,i){this.canvas=t,this.ctx=t.getContext("2d"),this.hitCanvas=i||new rt,this.hitCtx=this.hitCanvas.ctx}ctx;hitCanvas;hitCtx;dppx=window.devicePixelRatio;createChild(t,i){let r=this.hitCanvas.createChild(t,i),n=document.createElement("canvas"),o=new $e(n,r);return o.resize(t,i),o}copy(t,i,r){this.ctx.drawImage(t.canvas,i,r,t.width,t.height),t.hitCanvas.transferTo(this.hitCtx,i,r,t.width,t.height)}clearHitCanvas(){this.hitCanvas.clear()}fillCanvas(t){this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height)}get width(){return parseInt(this.canvas.style.width)||this.canvas.width}get height(){return parseInt(this.canvas.style.height)||this.canvas.height}resize(t,i){let{devicePixelRatio:r}=window,n=Math.floor(t),o=Math.floor(i),s=Math.floor(t*r),a=Math.floor(i*r),{canvas:l,ctx:h,hitCtx:d}=this;(l.width!==s||l.height!==a||r!==this.dppx)&&(this.dppx=r,l.width=Math.floor(t*r),l.height=Math.floor(i*r),h.setTransform(r,0,0,r,0,0),l.style.width=`${n}px`,l.style.height=`${o}px`,d.canvas.width=n,d.canvas.height=o)}fillRect(t){this.ctx.fillStyle=t.fill,t.rx||t.ry?(J(this.ctx,t.x,t.y,t.width,t.height,t.rx||0,t.ry||0),this.ctx.fill()):this.ctx.fillRect(t.x,t.y,t.width,t.height)}fillEllipse(t){this.ctx.fillStyle=t.fill,this.ctx.beginPath();let i=t.startAngle??0,r=t.endAngle??2*Math.PI;this.ctx.ellipse(t.cx,t.cy,t.rx,t.ry,0,i,r,t.anticlockwise),this.ctx.fill()}fillText(t){this.ctx.textBaseline=t.baseline,this.ctx.textAlign=t.align,this.ctx.font=t.font,this.ctx.fillStyle=t.color,this.ctx.fillText(t.text,t.x,t.y)}measureText(t,i){return this.ctx.font=i,{width:this.ctx.measureText(t).width}}strokeRect(t){if(t.dash&&this.ctx.setLineDash(t.dash),this.ctx.lineWidth=t.lineWidth??1,this.ctx.strokeStyle=t.color,this.ctx.lineJoin=t.lineJoin||"miter",t.crispen&&t.lineWidth){let i=Re(t,t.lineWidth/2,t.lineWidth/2);t.rx||t.ry?(J(this.ctx,i.x,i.y,i.width,i.height,t.rx||0,t.ry||0),this.ctx.stroke()):this.ctx.strokeRect(i.x,i.y,i.width,i.height)}else t.rx||t.ry?(J(this.ctx,t.x,t.y,t.width,t.height,t.rx||0,t.ry||0),this.ctx.stroke()):this.ctx.strokeRect(t.x,t.y,t.width,t.height);t.dash&&this.ctx.setLineDash([])}strokeEllipse(t){t.dash&&this.ctx.setLineDash(t.dash),this.ctx.lineWidth=t.lineWidth??1,this.ctx.beginPath();let i=t.startAngle??0,r=t.endAngle??2*Math.PI;this.ctx.ellipse(t.cx,t.cy,t.rx,t.ry,0,i,r,t.anticlockwise),this.ctx.strokeStyle=t.color,this.ctx.stroke(),t.dash&&this.ctx.setLineDash([])}strokePath(t){t.dash&&this.ctx.setLineDash(t.dash),this.ctx.beginPath();for(let i of t.path.segments)i.line?this.ctx.lineTo(i.x,i.y):this.ctx.moveTo(i.x,i.y);this.ctx.lineWidth=t.lineWidth??1,this.ctx.lineCap=t.lineCap||"butt",this.ctx.lineJoin=t.lineJoin||"miter",this.ctx.strokeStyle=t.color,this.ctx.stroke(),t.dash&&this.ctx.setLineDash([])}fillPath(t){this.ctx.beginPath();for(let i of t.path.segments)i.line?this.ctx.lineTo(i.x,i.y):this.ctx.moveTo(i.x,i.y);this.ctx.fillStyle=t.fill,this.ctx.fill()}addHitRegion(t){return this.hitCanvas.beginHitRegion(t),new nt(this.hitCanvas.ctx)}};function J(e,t,i,r,n,o,s){e.beginPath(),!o&&!s?e.rect(t,i,r,n):(r<2*o&&(o=r/2),n<2*s&&(s=n/2),e.moveTo(t+o,i),e.lineTo(t+r-o,i),e.quadraticCurveTo(t+r,i,t+r,i+s),e.lineTo(t+r,i+n-s),e.quadraticCurveTo(t+r,i+n,t+r-o,i+n),e.lineTo(t+o,i+n),e.quadraticCurveTo(t,i+n,t,i+n-s),e.lineTo(t,i+s),e.quadraticCurveTo(t,i,t+o,i))}var ot=class{constructor(e,t){this.timeline=t,this.id=e}id;grabStartPoint;grabStartCursor;doubleClickListeners=[];mouseMoveListeners=[];mouseLeaveListeners=[];addDoubleClickListener(e){this.doubleClickListeners.push(e)}removeDoubleClickListener(e){this.doubleClickListeners=this.doubleClickListeners.filter(t=>t!==e)}addMouseMoveListener(e){this.mouseMoveListeners.push(e)}removeMouseMoveListener(e){this.mouseMoveListeners=this.mouseMoveListeners.filter(t=>t!==e)}addMouseLeaveListener(e){this.mouseLeaveListeners.push(e)}removeMouseLeaveListener(e){this.mouseLeaveListeners=this.mouseLeaveListeners.filter(t=>t!==e)}doubleClick(e){let t={clientX:e.clientX,clientY:e.clientY,time:this.timeline.timeForCanvasPosition(e.x)};this.doubleClickListeners.forEach(i=>i(t))}click(){this.timeline.clearSelection()}mouseDown(e){this.grabStartPoint={x:e.x,y:e.y},this.grabStartCursor=this.timeline.cursor}grab(e){switch(this.timeline.tool){case"hand":this.timeline.cursor="grabbing",this.timeline.panBy(-e.movementX,!1);break;case"range-select":this.timeline.cursor="col-resize";let t=this.timeline.timeForCanvasPosition(this.grabStartPoint.x),i=this.timeline.timeForCanvasPosition(e.x);this.timeline.setSelection(t,i);break}}grabEnd(){this.timeline.cursor=this.grabStartCursor||this.timeline.cursor}wheel(e){e.deltaX>0?this.timeline.panBy(50):e.deltaX<0&&this.timeline.panBy(-50);let t=this.timeline.timeForCanvasPosition(e.x);e.deltaY>0?this.timeline.zoom(2,!0,t):e.deltaY<0&&this.timeline.zoom(.5,!0,t)}mouseMove(e){let t={clientX:e.clientX,clientY:e.clientY,time:this.timeline.timeForCanvasPosition(e.x)};this.mouseMoveListeners.forEach(i=>i(t))}mouseLeave(e){let t={clientX:e.clientX,clientY:e.clientY};this.mouseLeaveListeners.forEach(i=>i(t))}keyDown(e){if(!(e.ctrlKey||e.metaKey||e.altKey)){switch(e.key){case"+":case"=":this.timeline.zoomIn();return;case"-":this.timeline.zoomOut();return;case"ArrowLeft":this.timeline.panBy(50);return;case"ArrowRight":this.timeline.panBy(-50);return}switch(e.code){case"Plus":this.timeline.zoomIn();return;case"Minus":this.timeline.zoomOut();return}}}},Xe="viewport",st="divider",Dr=class{constructor(e){this.targetElement=e,this.rootPanel=document.createElement("div"),this.rootPanel.className="timeline-root",this.rootPanel.style.overflow="hidden",this.rootPanel.style.position="relative",this.rootPanel.style.fontSize="0",e.appendChild(this.rootPanel),this.scrollPanel=document.createElement("div"),this.scrollPanel.className="timeline-scroll",this.scrollPanel.style.height="100%",this.scrollPanel.style.overflow="hidden",this.scrollPanel.style.position="relative",this.scrollPanel.style.fontSize="0",this.rootPanel.appendChild(this.scrollPanel);let t=document.createElement("canvas");t.tabIndex=0,t.style.outline="none",this.scrollPanel.appendChild(t),this.g=new pe(t),this._start=this.createAnimatableProperty(0),this._stop=this.createAnimatableProperty(100),this.scrollPanel.addEventListener("scroll",()=>{this.requestRepaint()}),new tt(t,this.g.hitCanvas),this.mediaQueryListEventListener=()=>{this.repaintRequested=!0,this.mediaQueryList=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this.mediaQueryList.addEventListener("change",this.mediaQueryListEventListener,{once:!0})},this.mediaQueryListEventListener();let i=document.createElement("canvas");i.className="timeline-frozen",i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.pointerEvents="none",this.rootPanel.appendChild(i),this.frozenGraphics=new pe(i),this.sidebar=new et(this),this.animationFrameRequest=window.requestAnimationFrame(r=>this.step(r))}_sidebar;_drawables=[];rootPanel;scrollPanel;g;_start;_stop;_min;_max;_minRange;_maxRange;_tool="hand";selection;frameTime;repaintRequested=!1;frozenGraphics;viewportChangeListeners=[];viewportSelectionListeners=[];animated=!0;animatableProperties=[];_background="#ffffff";_foregroundColor="grey";_bandBorderColor="#e8e8e8";_bandBorderWidth=1;_fontFamily="Verdana, Geneva, sans-serif";_textSize=10;_unselectedBackground="rgba(170, 170, 170, 0.3)";_selectedBackground="transparent";_selectedLineDash=[4,3];_selectedLineColor="transparent";mediaQueryList;mediaQueryListEventListener;animationFrameRequest;viewportRegion=new ot(Xe,this);dividerRegion=new Je(st,this);disconnect(){this.mediaQueryList?.removeEventListener("change",this.mediaQueryListEventListener),this.animationFrameRequest&&window.cancelAnimationFrame(this.animationFrameRequest);for(let e of this._drawables)e.disconnectedCallback();this.sidebar?.disconnectedCallback()}createAnimatableProperty(e){let t=new Qe(e);return this.animatableProperties.push(t),t}step(e){this.animationFrameRequest=window.requestAnimationFrame(t=>this.step(t)),this.frameTime=e;for(let t of this.animatableProperties)this.animated?t.step(e)&&(this.repaintRequested=!0):t.completeTransition();if(this.repaintRequested)try{this.g.clearHitCanvas(),this.drawScreen()}finally{this.repaintRequested=!1}}setViewRange(e,t,i=!0){let{min:r,max:n,minRange:o,maxRange:s}=this,a=t-e;if(o!==void 0&&a<o){let l=o-a;a-=l,e-=Math.floor(l/2),t+=Math.ceil(l/2)}if(s!==void 0&&a>s){let l=a-s;a+=l,e+=Math.floor(l/2),t-=Math.ceil(l/2)}r!==void 0&&(e=Math.max(r,e),n!==void 0&&(a=Math.min(n-r,a)),t=e+a),n!==void 0&&(t=Math.min(n,t),r!==void 0&&(a=Math.min(n-r,a)),e=t-a),this.animated&&i?(this._start.setTransition(this.frameTime,e),this._stop.setTransition(this.frameTime,t)):(this._start.value=e,this._stop.value=t),this.viewportChangeListeners.forEach(l=>l({start:e,stop:t})),this.requestRepaint()}getSelection(){return this.selection}setSelection(e,t){t>e?this.selection={start:e,stop:t}:t===e?this.selection=void 0:this.selection={start:t,stop:e},this.viewportSelectionListeners.forEach(i=>i({selection:this.selection})),this.requestRepaint()}clearSelection(){this.selection=void 0,this.viewportSelectionListeners.forEach(e=>e({selection:this.selection})),this.requestRepaint()}get start(){return this._start.value}get stop(){return this._stop.value}get min(){return this._min}set min(e){this._min=e??void 0,this.setViewRange(this.start,this.stop,!1)}get max(){return this._max}set max(e){this._max=e??void 0,this.setViewRange(this.start,this.stop,!1)}get minRange(){return this._minRange}set minRange(e){this._minRange=e??void 0,this.setViewRange(this.start,this.stop,!1)}get maxRange(){return this._maxRange}set maxRange(e){this._maxRange=e??void 0,this.setViewRange(this.start,this.stop,!1)}get width(){return this.scrollPanel.clientWidth}get sidebar(){return this._sidebar}set sidebar(e){this._sidebar!==e&&(this._sidebar?.disconnectedCallback(),this._sidebar=e)}get cursor(){return this.g.canvas.style.cursor}set cursor(e){e!==this.cursor&&(this.g.canvas.style.cursor=e)}toDataURL(e="image/png",t){return this.g.ctx.canvas.toDataURL(e,t)}requestRepaint(){this.repaintRequested=!0}get mainWidth(){let e=this.sidebar?.clippedWidth||0;return this.width-e}add(e){return e instanceof Ee?this.sidebar=e:this._drawables.indexOf(e)===-1&&(this._drawables.push(e),this.requestRepaint()),e}addViewportChangeListener(e){this.viewportChangeListeners.push(e)}removeViewportChangeListener(e){this.viewportChangeListeners=this.viewportChangeListeners.filter(t=>t!==e)}addViewportDoubleClickListener(e){this.viewportRegion.addDoubleClickListener(e)}removeViewportDoubleClickListener(e){this.viewportRegion.removeDoubleClickListener(e)}addViewportMouseMoveListener(e){this.viewportRegion.addMouseMoveListener(e)}removeViewportMouseMoveListener(e){this.viewportRegion.removeMouseMoveListener(e)}addViewportMouseLeaveListener(e){this.viewportRegion.addMouseLeaveListener(e)}removeViewportMouseLeaveListener(e){this.viewportRegion.removeMouseLeaveListener(e)}addViewportSelectionListener(e){this.viewportSelectionListeners.push(e)}removeViewportSelectionListener(e){this.viewportSelectionListeners=this.viewportSelectionListeners.filter(t=>t!==e)}panBy(e,t=!0){let i=this.stop-this.start,r=this.mainWidth,n=e/r*i,o=this.start+n,s=this.stop+n;this.setViewRange(o,s,t)}panTo(e,t=!0){let i=(this.stop-this.start)/2,r=e-i,n=e+i;this.setViewRange(r,n,t)}get center(){return this.start+(this.stop-this.start)/2}set center(e){this.panTo(e,!1)}getChildren(){return[...this._drawables]}getBands(){return this._drawables.filter(e=>e instanceof P)}removeChild(e){if(e===this.sidebar)return e.disconnectedCallback(),this.sidebar=void 0,this.requestRepaint(),!0;{let t=this._drawables.indexOf(e);return t!==-1?(e.disconnectedCallback(),this._drawables.splice(t,1),this.requestRepaint(),!0):!1}}positionTime(e){return this.distanceBetween(this.start,e)}timeForCanvasPosition(e){let t=this.sidebar?.clippedWidth||0,i=e-t,r=this.stop-this.start,n=this.mainWidth,o=i/n*r;return this.start+o}distanceBetween(e,t){let i=t-e,r=this.stop-this.start;return this.mainWidth*(i/r)}get tool(){return this._tool}set tool(e){this._tool=e,this.requestRepaint()}zoomIn(){this.zoom(.5)}zoomOut(){this.zoom(2)}zoom(e,t=!0,i){if(e<=0)throw new Error("Zoom factor should be a positive number");i===void 0&&(i=this.center);let r=(i-this.start)/(this.stop-this.start),n=(this.stop-this.start)*e,o=i-r*n,s=i+(1-r)*n;this.setViewRange(o,s,t)}get background(){return this._background}set background(e){this._background=e,this.requestRepaint()}get foregroundColor(){return this._foregroundColor}set foregroundColor(e){this._foregroundColor=e,this.requestRepaint()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.requestRepaint()}get textSize(){return this._textSize}set textSize(e){this._textSize=e,this.requestRepaint()}get bandBorderColor(){return this._bandBorderColor}set bandBorderColor(e){this._bandBorderColor=e,this.requestRepaint()}get bandBorderWidth(){return this._bandBorderWidth}set bandBorderWidth(e){this._bandBorderWidth=e,this.requestRepaint()}drawScreen(){let{g:e}=this;for(let a of this._drawables)a.beforeDraw(e);let t=this.getBands().filter(a=>a.frozen).concat(this.getBands().filter(a=>!a.frozen)),i=0;for(let a of t)a.coords.x=0,a.coords.y=i,a.coords.width=this.mainWidth,a.coords.height=a.paddingTop+a.contentHeight+a.paddingBottom,i+=a.height+(a.borderWidth??this.bandBorderWidth);this.rootPanel.style.height=this.targetElement.clientHeight+"px",i>this.scrollPanel.clientHeight?this.scrollPanel.style.overflowY="scroll":this.scrollPanel.style.overflowY="hidden";let r=this.scrollPanel.clientWidth,n=Math.max(i,this.scrollPanel.clientHeight);e.resize(r,n),e.fillCanvas(this.background),this.sidebar?.drawContent(e);let o=this.sidebar?.clippedWidth||0;this.tool&&e.addHitRegion(this.viewportRegion).addRect(o,0,this.mainWidth,n);let s=e.createChild(this.mainWidth,n);this.drawOffscreen(s),e.copy(s,o,0),this.drawFrozenTop(),this.sidebar&&e.addHitRegion(this.dividerRegion).addRect(o-5,0,10,n)}drawOffscreen(e){for(let t of this._drawables)t instanceof P&&e.fillRect({x:t.x,y:t.y,width:e.width,height:t.height,fill:t.background});for(let t of this._drawables)if(t.drawUnderlay(e),t instanceof P){let i=t,r=i.borderWidth??this.bandBorderWidth;if(r){let n=t.y+t.height+r/2;e.strokePath({color:i.borderColor||this.bandBorderColor,lineWidth:r,path:new c(0,n).lineTo(e.width,n)})}}for(let t of this._drawables)t.drawContent(e);for(let t of this._drawables)t.drawOverlay(e);this.drawSelection(e)}drawSelection(e){if(!this.selection)return;let t=Math.round(this.positionTime(this.selection.start)),i=Math.round(this.positionTime(this.selection.stop));e.fillRect({x:0,y:0,width:t,height:e.height,fill:this._unselectedBackground}),e.fillRect({x:i,y:0,width:e.width-i,height:e.height,fill:this._unselectedBackground}),e.fillRect({x:t,y:0,width:e.width,height:e.height,fill:this._selectedBackground}),e.strokePath({color:this._selectedLineColor,dash:this._selectedLineDash,path:new c(t+.5,0).lineTo(t+.5,e.height).moveTo(i-.5,0).lineTo(i-.5,e.height)})}drawFrozenTop(){let e=this.frozenGraphics.ctx,t=this.g.width,i=0;for(let r of this.getBands())r.frozen&&(i+=r.height+(r.borderWidth??this.bandBorderWidth));this.frozenGraphics.resize(t,i),i&&e.drawImage(this.g.canvas,0,0,this.frozenGraphics.canvas.width,this.frozenGraphics.canvas.height,0,0,t,i)}},at=1,P=class extends de{_label;_frozen=!1;_background="transparent";_headerBackground="transparent";_borderWidth;_borderColor;_paddingBottom=0;_paddingTop=0;offscreen;coords={x:0,y:0,width:0,height:0};headerClickListeners=[];headerMouseEnterListeners=[];headerMouseMoveListeners=[];headerMouseLeaveListeners=[];mouseEnterListeners=[];mouseMoveListeners=[];mouseLeaveListeners=[];bandRegionId="band_"+at++;addHeaderClickListener(e){this.headerClickListeners.push(e),this.reportMutation()}removeHeaderClickListener(e){this.headerClickListeners=this.headerClickListeners.filter(t=>t!==e),this.reportMutation()}addHeaderMouseEnterListener(e){this.headerMouseEnterListeners.push(e),this.reportMutation()}removeHeaderMouseEnterListener(e){this.headerMouseEnterListeners=this.headerMouseEnterListeners.filter(t=>t!==e),this.reportMutation()}addHeaderMouseMoveListener(e){this.headerMouseMoveListeners.push(e),this.reportMutation()}removeHeaderMouseMoveListener(e){this.headerMouseMoveListeners=this.headerMouseMoveListeners.filter(t=>t!==e),this.reportMutation()}addHeaderMouseLeaveListener(e){this.headerMouseLeaveListeners.push(e),this.reportMutation()}removeHeaderMouseLeaveListener(e){this.headerMouseLeaveListeners=this.headerMouseLeaveListeners.filter(t=>t!==e),this.reportMutation()}addMouseEnterListener(e){console.log("addmouseenter"),this.mouseEnterListeners.push(e),this.reportMutation()}removeMouseEnterListener(e){this.mouseEnterListeners=this.mouseEnterListeners.filter(t=>t!==e),this.reportMutation()}addMouseMoveListener(e){this.mouseMoveListeners.push(e),this.reportMutation()}removeMouseMoveListener(e){this.mouseMoveListeners=this.mouseMoveListeners.filter(t=>t!==e),this.reportMutation()}addMouseLeaveListener(e){this.mouseLeaveListeners.push(e),this.reportMutation()}removeMouseLeaveListener(e){this.mouseLeaveListeners=this.mouseLeaveListeners.filter(t=>t!==e),this.reportMutation()}get label(){return this._label}set label(e){this._label=e,this.reportMutation()}get background(){return this._background}set background(e){this._background=e,this.reportMutation()}get headerBackground(){return this._headerBackground}set headerBackground(e){this._headerBackground=e,this.reportMutation()}get borderWidth(){return this._borderWidth}set borderWidth(e){this._borderWidth=e,this.reportMutation()}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e,this.reportMutation()}get paddingTop(){return this._paddingTop}set paddingTop(e){this._paddingTop=e,this.reportMutation()}get paddingBottom(){return this._paddingBottom}set paddingBottom(e){this._paddingBottom=e,this.reportMutation()}get frozen(){return this._frozen}set frozen(e){this._frozen=e,this.reportMutation()}beforeDraw(e){let t=this.calculateContentHeight(e);this.offscreen=e.createChild(this.timeline.mainWidth,t),this.offscreen.addHitRegion({id:this.bandRegionId,parentId:Xe,mouseEnter:i=>{let r={clientX:i.clientX,clientY:i.clientY,band:this};this.mouseEnterListeners.forEach(n=>n(r))},mouseMove:i=>{let r=this.createMouseMoveEvent(i);this.mouseMoveListeners.forEach(n=>n(r))},mouseLeave:i=>{let r={clientX:i.clientX,clientY:i.clientY,band:this};this.mouseLeaveListeners.forEach(n=>n(r))}}).addRect(0,0,this.timeline.mainWidth,t),this.drawBandContent(this.offscreen)}drawContent(e){this.offscreen&&e.copy(this.offscreen,this.x,this.y+this.paddingTop)}createMouseMoveEvent(e){let t=this.timeline.timeForCanvasPosition(e.x);return{clientX:e.clientX,clientY:e.clientY,band:this,time:t}}get contentHeight(){return this.offscreen?.canvas.height||0}get height(){return this.coords.height}get width(){return this.coords.width}get x(){return this.coords.x}get y(){return this.coords.y}},Pr=class extends P{_contentHeight=30;_text;_textAlignment="middle";_textColor="#333333";_textSize=16;_fontFamily="Verdana, Geneva, sans-serif";calculateContentHeight(e){return this._contentHeight}drawBandContent(e){if(!this.text)return;let t={color:this.textColor,font:`${this.textSize}px ${this.fontFamily}`,text:this.text};this.textAlignment==="left"?e.fillText(b(w({},t),{x:0,y:this.contentHeight/2,align:"left",baseline:"middle"})):this.textAlignment==="middle"?e.fillText(b(w({},t),{x:this.timeline.mainWidth/2,y:this.contentHeight/2,align:"center",baseline:"middle"})):e.fillText(b(w({},t),{x:this.timeline.mainWidth,y:this.contentHeight/2,align:"right",baseline:"middle"}))}get contentHeight(){return this._contentHeight}set contentHeight(e){this._contentHeight=e,this.reportMutation()}get text(){return this._text}set text(e){this._text=e,this.reportMutation()}get textAlignment(){return this._textAlignment}set textAlignment(e){this._textAlignment=e,this.reportMutation()}get textColor(){return this._textColor}set textColor(e){this._textColor=e,this.reportMutation()}get textSize(){return this._textSize}set textSize(e){this._textSize=e,this.reportMutation()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.reportMutation()}},lt=(e,t,i)=>{let r=t.width/2,n=t.height/2,o=new c(t.x+r,t.y).lineTo(t.x+t.width,t.y+n).lineTo(t.x+r,t.y+t.height).lineTo(t.x,t.y+n).closePath();e.fillPath({path:o,fill:i.fill}),i.borderWidth&&(t=Re(t,i.borderWidth/2),r=t.width/2,n=t.height/2,o=new c(t.x+r,t.y).lineTo(t.x+t.width,t.y+n).lineTo(t.x+r,t.y+t.height).lineTo(t.x,t.y+n).closePath(),e.strokePath({path:o,color:i.borderColor,dash:i.borderDash,lineWidth:i.borderWidth,lineCap:"round",lineJoin:"round"}))},ht=(e,t,i)=>{e.fillEllipse({cx:t.x+t.width/2,cy:t.y+t.height/2,rx:4,ry:4,fill:i.fill}),i.borderWidth&&e.strokeEllipse({cx:t.x+t.width/2,cy:t.y+t.height/2,rx:4-i.borderWidth/2,ry:4-i.borderWidth/2,color:i.borderColor,dash:i.borderDash,lineWidth:i.borderWidth})},dt=(e,t,i)=>{e.fillEllipse({cx:t.x+t.width/2,cy:t.y+t.height/2,rx:t.width/2,ry:t.height/2,fill:i.fill}),i.borderWidth&&e.strokeEllipse({cx:t.x+t.width/2,cy:t.y+t.height/2,rx:t.width/2-i.borderWidth/2,ry:t.height/2-i.borderWidth/2,color:i.borderColor,dash:i.borderDash,lineWidth:i.borderWidth})},ut=(e,t,i)=>{let r=new c(t.x+t.width/2,t.y).lineTo(t.x+t.width,t.y+t.height).lineTo(t.x,t.y+t.height).closePath();e.fillPath({fill:i.fill,path:r}),i.borderWidth&&e.strokePath({path:r,color:i.borderColor,dash:i.borderDash,lineWidth:i.borderWidth})},ct=(e,t,i)=>{let r=new c(t.x,t.y).lineTo(t.x+t.width,t.y).lineTo(t.x+t.width/2,t.y+t.height).closePath();e.fillPath({fill:i.fill,path:r}),i.borderWidth&&e.strokePath({path:r,color:i.borderColor,dash:i.borderDash,lineWidth:i.borderWidth})},mt=1,Br=class extends P{_itemBackground="#77b1e1";_itemBorderColor="#000000";_itemBorderDash=[];_itemBorderWidth=0;_itemCornerRadius=0;_itemCursor="pointer";_itemFontFamily="Verdana, Geneva, sans-serif";_itemHeight=30;_itemHoverBackground="rgba(255, 255, 255, 0.2)";_itemHoverBorderWidth=0;_itemPaddingLeft=5;_itemTextColor="#333333";_itemTextOverflow="show";_itemTextSize=10;_items=[];_lineSpacing=0;_spaceBetween=0;_multiline=!0;_milestoneShape="diamond";itemsById=new Map;annotatedItems=[];lines=[];itemClickListeners=[];itemMouseEnterListeners=[];itemMouseMoveListeners=[];itemMouseLeaveListeners=[];addItemClickListener(e){this.itemClickListeners.push(e)}removeItemClickListener(e){this.itemClickListeners=this.itemClickListeners.filter(t=>t!==e)}addItemMouseEnterListener(e){this.itemMouseEnterListeners.push(e)}removeItemMouseEnterListener(e){this.itemMouseEnterListeners=this.itemMouseEnterListeners.filter(t=>t!==e)}addItemMouseMoveListener(e){this.itemMouseMoveListeners.push(e)}removeItemMouseMoveListener(e){this.itemMouseMoveListeners=this.itemMouseMoveListeners.filter(t=>t!==e)}addItemMouseLeaveListener(e){this.itemMouseLeaveListeners.push(e)}removeItemMouseLeaveListener(e){this.itemMouseLeaveListeners=this.itemMouseLeaveListeners.filter(t=>t!==e)}processData(){this.annotatedItems.length=0;for(let e of this.items||[]){let t=this.itemsById.get(e);t===void 0&&(t="item_band_"+mt++);let i=b(w({},e),{hovered:!1,region:{id:t,parentId:this.bandRegionId,cursor:this.itemCursor,click:()=>{this.itemClickListeners.forEach(r=>r({item:e}))},mouseEnter:r=>{i.hovered=!0,this.reportMutation(),this.itemMouseEnterListeners.forEach(n=>n({clientX:r.clientX,clientY:r.clientY,item:e}))},mouseMove:r=>{this.itemMouseMoveListeners.forEach(n=>n({clientX:r.clientX,clientY:r.clientY,item:e}))},mouseLeave:r=>{i.hovered=!1,this.reportMutation(),this.itemMouseLeaveListeners.forEach(n=>n({clientX:r.clientX,clientY:r.clientY,item:e}))}}});this.annotatedItems.push(i)}this.itemsById.clear();for(let e of this.annotatedItems)this.itemsById.set(e,e.region.id)}calculateContentHeight(e){this.measureItems(e);let t=this.annotatedItems.filter(r=>!!r.drawInfo);this.lines=this.multiline?this.wrapItems(t):[t];let i;return this.lines.length>1?(i=this.itemHeight*this.lines.length,i+=this.lineSpacing*(this.lines.length-1),i):this.itemHeight}drawBandContent(e){for(let t=0;t<this.lines.length;t++){let i=this.lines[t],r=t*(this.lineSpacing+this.itemHeight);for(let n of i)n.drawInfo.milestone?this.drawMilestone(e,n,r):this.drawItem(e,n,r)}}drawMilestone(e,t,i){let{startX:r,renderStartX:n,renderStopX:o,label:s,font:a,paddingLeft:l}=t.drawInfo,h={x:r,y:i,width:this.itemHeight,height:this.itemHeight},d={fill:t.background??this.itemBackground,borderWidth:t.borderWidth??this.itemBorderWidth,borderColor:t.borderColor??this.itemBorderColor,borderDash:t.borderDash??this.itemBorderDash};if(this.drawMilestoneShape(e,h,d),t.hovered){let u=t.hoverBackground??this.itemHoverBackground,m=b(w({},d),{fill:u});this.drawMilestoneShape(e,h,m)}e.addHitRegion(t.region).addRect(n,i,o-n,this.itemHeight),s&&e.fillText({x:r+h.width+l,y:i+h.height/2,text:s,font:a,baseline:"middle",align:"left",color:t.textColor??this.itemTextColor})}drawMilestoneShape(e,t,i){switch(this.milestoneShape){case"circle":dt(e,t,i);break;case"diamond":lt(e,t,i);break;case"dot":ht(e,t,i);break;case"reverse_triangle":ct(e,t,i);break;case"triangle":ut(e,t,i);break}}drawItem(e,t,i){let{startX:r,stopX:n,label:o,renderStartX:s,renderStopX:a,paddingLeft:l,offscreenStart:h,labelFitsBox:d,labelFitsVisibleBox:u,font:m}=t.drawInfo,v={x:Math.round(r),y:i,width:Math.round(n-Math.round(r)),height:this.itemHeight},M=t.cornerRadius??this.itemCornerRadius;e.fillRect(b(w({},v),{rx:M,ry:M,fill:t.background??this.itemBackground})),t.hovered&&e.fillRect(b(w({},v),{rx:M,ry:M,fill:t.hoverBackground??this.itemHoverBackground})),e.addHitRegion(t.region).addRect(s,i,a-s,this.itemHeight);let C=t.borderWidth??this.itemBorderWidth;if(C&&e.strokeRect(b(w({},v),{rx:M,ry:M,color:t.borderColor??this.itemBorderColor,lineWidth:C,dash:t.borderDash??this.itemBorderDash,crispen:!0})),t.hovered&&this.itemHoverBorderWidth&&e.strokeRect(b(w({},v),{rx:M,ry:M,color:t.borderColor??this.itemBorderColor,lineWidth:this.itemHoverBorderWidth,dash:t.borderDash??this.itemBorderDash,crispen:!0})),o){let L=v.x+l,k=v.y+v.height/2;if(h&&(L=this.timeline.positionTime(this.timeline.start)),d||u||this.itemTextOverflow==="show")e.fillText({x:L,y:k,text:o,font:m,baseline:"middle",align:"left",color:t.textColor??this.itemTextColor});else if(this.itemTextOverflow==="clip"){let H=document.createElement("canvas");H.width=v.width,H.height=v.height;let $=H.getContext("2d");$.fillStyle=t.textColor??this.itemTextColor,$.font=m,$.textBaseline="middle",$.textAlign="left",$.fillText(o,l,v.height/2),e.ctx.drawImage(H,v.x,v.y)}}}measureItems(e){for(let t of this.annotatedItems){let i=!t.stop,r=t.start,n=t.stop||t.start;if(r>this.timeline.stop||n<this.timeline.start){t.drawInfo=void 0;continue}let o=t.label||"",s=t.textSize??this.itemTextSize,a=t.fontFamily??this.itemFontFamily,l=`${s}px ${a}`,h=t.paddingLeft??this.itemPaddingLeft,d=r<this.timeline.start&&n>this.timeline.start,u,m,v=this.timeline.positionTime(r),M=this.timeline.positionTime(n),C,L;if(i){let k=this.itemHeight/2;if(v-=k,M+=k,C=v,L=M,u=!1,m=!1,o&&this.itemTextOverflow==="show"){let H=e.measureText(o,l);L+=h+H.width}else o=""}else{d&&(o="\u25C0"+o);let k=e.measureText(o,l);d?(C=this.timeline.positionTime(this.timeline.start),L=Math.max(C+k.width,M),u=!1,m=L-C-h>=k.width):(C=v,L=M,u=L-C-h>=k.width,m=u,u||(this.itemTextOverflow==="show"?L=C+h+k.width:this.itemTextOverflow==="hide"&&(o="")))}t.drawInfo={font:l,paddingLeft:h,offscreenStart:d,startX:v,stopX:M,renderStartX:C,renderStopX:L,label:o,labelFitsBox:u,labelFitsVisibleBox:m,milestone:i}}}wrapItems(e){let t=[];for(let i of e){let{renderStartX:r,renderStopX:n}=i.drawInfo,o=!1;for(let s of t){let a=0,l=s.length-1;for(;a<=l;){let h=Math.floor((a+l)/2),d=s[h].drawInfo.renderStartX,u=s[h].drawInfo.renderStopX;if(n+this.spaceBetween<=d)l=h-1;else if(r>=u+this.spaceBetween)a=h+1;else break}if(a>l){s.splice(a,0,i),o=!0;break}}o||t.push([i])}return t}get items(){return this._items}set items(e){this._items=e,this.processData(),this.reportMutation()}get itemHeight(){return this._itemHeight}set itemHeight(e){this._itemHeight=e,this.reportMutation()}get itemBackground(){return this._itemBackground}set itemBackground(e){this._itemBackground=e,this.reportMutation()}get itemTextColor(){return this._itemTextColor}set itemTextColor(e){this._itemTextColor=e,this.reportMutation()}get itemTextSize(){return this._itemTextSize}set itemTextSize(e){this._itemTextSize=e,this.reportMutation()}get itemFontFamily(){return this._itemFontFamily}set itemFontFamily(e){this._itemFontFamily=e,this.reportMutation()}get itemBorderWidth(){return this._itemBorderWidth}set itemBorderWidth(e){this._itemBorderWidth=e,this.reportMutation()}get itemBorderColor(){return this._itemBorderColor}set itemBorderColor(e){this._itemBorderColor=e,this.reportMutation()}get itemBorderDash(){return this._itemBorderDash}set itemBorderDash(e){this._itemBorderDash=e,this.reportMutation()}get itemPaddingLeft(){return this._itemPaddingLeft}set itemPaddingLeft(e){this._itemPaddingLeft=e,this.reportMutation()}get itemCornerRadius(){return this._itemCornerRadius}set itemCornerRadius(e){this._itemCornerRadius=e,this.reportMutation()}get multiline(){return this._multiline}set multiline(e){this._multiline=e,this.reportMutation()}get spaceBetween(){return this._spaceBetween}set spaceBetween(e){this._spaceBetween=e,this.reportMutation()}get lineSpacing(){return this._lineSpacing}set lineSpacing(e){this._lineSpacing=e,this.reportMutation()}get itemTextOverflow(){return this._itemTextOverflow}set itemTextOverflow(e){this._itemTextOverflow=e,this.reportMutation()}get itemCursor(){return this._itemCursor}set itemCursor(e){this._itemCursor=e,this.reportMutation()}get itemHoverBackground(){return this._itemHoverBackground}set itemHoverBackground(e){this._itemHoverBackground=e,this.reportMutation()}get itemHoverBorderWidth(){return this._itemHoverBorderWidth}set itemHoverBorderWidth(e){this._itemHoverBorderWidth=e,this.reportMutation()}get milestoneShape(){return this._milestoneShape}set milestoneShape(e){this._milestoneShape=e,this.reportMutation()}},gt=1,Wr=class extends P{_fill="transparent";_lineColor="#4f9146";_lineWidth=1;_labelFontFamily="Verdana, Geneva, sans-serif";_labelBackground="transparent";_labelTextColor="#333333";_labelTextSize=8;_minimum;_maximum;_pointRadius=1.5;_pointColor="#4f9146";_lohiColor="#5555552b";_lines=[];_contentHeight=30;_zeroLineColor="#e8e8e8";_zeroLineWidth=0;_zeroLineDash=[4,3];_labelFormatter=e=>e.toFixed(2);annotatedLines=[];addMouseMoveListener(e){super.addMouseMoveListener(e)}removeMouseMoveListener(e){super.removeMouseMoveListener(e)}processData(){if(this.annotatedLines.length=0,this.lines.length)for(let e of this.lines){let t="line_plot_"+gt++,i=[];for(let[r,n]of e.points){let o=null,s=null;if(e.lohi){let a=e.lohi.get(r);o=a?a[0]??null:null,s=a?a[1]??null:null}i.push({x:r,y:n,low:o,high:s})}i.sort((r,n)=>r.x-n.x),this.annotatedLines.push({id:t,visible:e.visible??!0,lineColor:e.lineColor,lineWidth:e.lineWidth,fill:e.fill,pointRadius:e.pointRadius,pointColor:e.pointColor,lohiColor:e.lohiColor,points:i})}}calculateContentHeight(e){return this._contentHeight}drawBandContent(e){let{contentHeight:t}=this,i=this.minimum,r=this.maximum;if(i==null||r==null){for(let d of this.visibleLines)for(let u of d.points)if(!(u.x<this.timeline.start||u.x>this.timeline.stop)){if(this.minimum===void 0&&u.y!==null){let m=u.low!==null?Math.min(u.low,u.y):u.y;(i===void 0||m<i)&&(i=m)}if(this.maximum===void 0&&u.y!==null){let m=u.high!==null?Math.max(u.high,u.y):u.y;(r===void 0||m>r)&&(r=m)}}}if(i===void 0||r===void 0)return;r<i&&([i,r]=[r,i]);let n=d=>t-(d-i)/(r-i)*(t-0);for(let d=0;d<this.visibleLines.length;d++)if(this.visibleLines[d].points.length){let u=this.visibleLines[d];for(let m of u.points)m.drawInfo={renderX:Math.round(this.timeline.positionTime(m.x)),renderY:m.y!==null?n(m.y):void 0};this.drawArea(e,u,n)}if(this.zeroLineWidth>0){let d=Math.round(n(0))-.5;e.strokePath({path:new c(0,d).lineTo(this.timeline.mainWidth,d),color:this.zeroLineColor,dash:this.zeroLineDash,lineWidth:this.zeroLineWidth})}for(let d=0;d<this.visibleLines.length;d++)if(this.visibleLines[d].points.length){let u=this.visibleLines[d];this.drawLohi(e,u,n),this.drawLine(e,u)}let o=4,s=`${this.labelTextSize}px ${this.labelFontFamily}`,a=this.labelFormatter(i),l=e.measureText(a,s);e.fillRect({x:this.timeline.mainWidth-l.width-o,y:t-this.labelTextSize-.5,width:l.width,height:this.labelTextSize,fill:this.labelBackground});let h=this.labelFormatter(r);l=e.measureText(h,s),e.fillRect({x:this.timeline.mainWidth-l.width-o,y:.5,width:l.width,height:this.labelTextSize,fill:this.labelBackground}),e.fillText({text:a,align:"right",baseline:"bottom",color:this.labelTextColor,font:s,x:this.timeline.mainWidth-o,y:t}),e.fillText({text:h,align:"right",baseline:"top",color:this.labelTextColor,font:s,x:this.timeline.mainWidth-o,y:.5})}drawLohi(e,t,i){let r=t.lohiColor??this.lohiColor;for(let n=1;n<t.points.length;n++){let o=t.points[n-1].drawInfo,s=t.points[n-1].low,a=t.points[n-1].high,l=t.points[n].drawInfo,h=t.points[n].low,d=t.points[n].high;if(o.renderY!==void 0&&l.renderY!==void 0&&s!==null&&a!=null&&h!==null&&d!==null){let u=i(s),m=i(a),v=i(h),M=i(d);e.fillPath({path:new c(o.renderX,m).lineTo(o.renderX,u).lineTo(l.renderX,v).lineTo(l.renderX,M),fill:r})}}}drawArea(e,t,i){let r=t.fill??this.fill,n=Math.round(i(0))+.5;for(let o=1;o<t.points.length;o++){let s=t.points[o-1].drawInfo,a=t.points[o].drawInfo;s.renderY!==void 0&&a.renderY!==void 0&&e.fillPath({path:new c(s.renderX,s.renderY).lineTo(s.renderX,n).lineTo(a.renderX,n).lineTo(a.renderX,a.renderY),fill:r})}}drawLine(e,t){let i=t.lineColor??this.lineColor,r=t.lineWidth??this.lineWidth,n=t.pointColor??this.pointColor,o=t.pointRadius??this.pointRadius,{points:s}=t,a=new c(s[0].drawInfo.renderX,s[0].drawInfo.renderY??0);for(let l=1;l<s.length;l++){let h=s[l-1].drawInfo,d=s[l].drawInfo;h.renderY!==void 0&&d.renderY!==void 0?a.lineTo(d.renderX,d.renderY):d.renderY!==void 0&&a.moveTo(d.renderX,d.renderY)}e.strokePath({path:a,color:i,lineWidth:r,lineCap:"round",lineJoin:"round"});for(let l of s){let{renderX:h,renderY:d}=l.drawInfo;d!==void 0&&e.fillEllipse({cx:h,cy:d,rx:o,ry:o,fill:n})}}get visibleLines(){return this.annotatedLines.filter(e=>e.visible)}findClosestByTime(e){let t=[];for(let i of this.visibleLines){let r=null,n=null,o=null,s=null,a=null,l=1/0;for(let d=0;d<i.points.length;d++){let{x:u,y:m,low:v,high:M}=i.points[d];Math.abs(u-e)<l&&(r=d,n=u,o=m,s=v,a=M,l=Math.abs(u-e))}let h=r===i.points.length-1&&n!==e;n!==null&&!h?t.push({time:n,value:o,low:s,high:a}):t.push(null)}return t}createMouseMoveEvent(e){let t=super.createMouseMoveEvent(e);return b(w({},t),{points:this.findClosestByTime(t.time)})}get contentHeight(){return this._contentHeight}set contentHeight(e){this._contentHeight=e,this.reportMutation()}get lineColor(){return this._lineColor}set lineColor(e){this._lineColor=e,this.reportMutation()}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=e,this.reportMutation()}get fill(){return this._fill}set fill(e){this._fill=e,this.reportMutation()}get pointColor(){return this._pointColor}set pointColor(e){this._pointColor=e,this.reportMutation()}get lohiColor(){return this._lohiColor}set lohiColor(e){this._lohiColor=e,this.reportMutation()}get pointRadius(){return this._pointRadius}set pointRadius(e){this._pointRadius=e,this.reportMutation()}get labelFontFamily(){return this._labelFontFamily}set labelFontFamily(e){this._labelFontFamily=e,this.reportMutation()}get labelBackground(){return this._labelBackground}set labelBackground(e){this._labelBackground=e,this.reportMutation()}get labelTextColor(){return this._labelTextColor}set labelTextColor(e){this._labelTextColor=e,this.reportMutation()}get labelTextSize(){return this._labelTextSize}set labelTextSize(e){this._labelTextSize=e,this.reportMutation()}get labelFormatter(){return this._labelFormatter}set labelFormatter(e){this._labelFormatter=e,this.reportMutation()}get zeroLineColor(){return this._zeroLineColor}set zeroLineColor(e){this._zeroLineColor=e,this.reportMutation()}get zeroLineWidth(){return this._zeroLineWidth}set zeroLineWidth(e){this._zeroLineWidth=e,this.reportMutation()}get zeroLineDash(){return this._zeroLineDash}set zeroLineDash(e){this._zeroLineDash=e,this.reportMutation()}get minimum(){return this._minimum}set minimum(e){this._minimum=e,this.processData(),this.reportMutation()}get maximum(){return this._maximum}set maximum(e){this._maximum=e,this.processData(),this.reportMutation()}get lines(){return this._lines}set lines(e){this._lines=e,this.processData(),this.reportMutation()}},ft=class extends de{_knobColor="red";_knobRadius=3;_lineColor="red";_lineWidth=1;_lineDash=[];_time;drawOverlay(e){if(this.time===void 0)return;let t=Math.round(this.timeline.positionTime(this.time)),i={x:t,y:0},r={x:t,y:e.height};e.strokePath({color:this.lineColor,lineWidth:this.lineWidth,dash:this.lineDash,path:new c(i.x+.5,i.y).lineTo(r.x+.5,r.y)}),this.drawKnob(e,i,r)}drawKnob(e,t,i){e.ctx.beginPath(),e.ctx.arc(t.x+.5,t.y,this.knobRadius,0,2*Math.PI),e.ctx.fillStyle=this.knobColor,e.ctx.fill()}get time(){return this._time}set time(e){this._time=e,this.reportMutation()}get knobColor(){return this._knobColor}set knobColor(e){this._knobColor=e,this.reportMutation()}get knobRadius(){return this._knobRadius}set knobRadius(e){this._knobRadius=e,this.reportMutation()}get lineColor(){return this._lineColor}set lineColor(e){this._lineColor=e,this.reportMutation()}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=e,this.reportMutation()}get lineDash(){return this._lineDash}set lineDash(e){this._lineDash=e,this.reportMutation()}},Hr=class extends ft{mouseMoveListener=e=>{e.time!==this.time&&(this.time=e.time,this.reportMutation())};mouseLeaveListener=()=>{this.time=void 0,this.reportMutation()};constructor(e){super(e),this.lineColor="#cccccc",this.knobColor="#cccccc",this.knobRadius=0,this.lineWidth=2,this.lineDash=[6,2],e.addViewportMouseMoveListener(this.mouseMoveListener),e.addViewportMouseLeaveListener(this.mouseLeaveListener)}disconnectedCallback(){this.timeline.removeViewportMouseMoveListener(this.mouseMoveListener),this.timeline.removeViewportMouseLeaveListener(this.mouseLeaveListener)}},pt=1,Fr=class extends P{_contentHeight=30;_stateBackground="#77b1e1";_stateDividerColor="#e8e8e8";_stateDividerWidth=1;_stateDividerDash=[];_stateCursor="pointer";_stateFontFamily="Verdana, Geneva, sans-serif";_stateHoverBackground="rgba(255, 255, 255, 0.2)";_statePaddingLeft=5;_stateTextColor="#333333";_stateTextSize=10;_states=[];statesById=new Map;annotatedStates=[];stateClickListeners=[];stateMouseEnterListeners=[];stateMouseMoveListeners=[];stateMouseLeaveListeners=[];addStateClickListener(e){this.stateClickListeners.push(e)}removeStateClickListener(e){this.stateClickListeners=this.stateClickListeners.filter(t=>t!==e)}addStateMouseEnterListener(e){this.stateMouseEnterListeners.push(e)}removeStateMouseEnterListener(e){this.stateMouseEnterListeners=this.stateMouseEnterListeners.filter(t=>t!==e)}addStateMouseMoveListener(e){this.stateMouseMoveListeners.push(e)}removeStateMouseMoveListener(e){this.stateMouseMoveListeners=this.stateMouseMoveListeners.filter(t=>t!==e)}addStateMouseLeaveListener(e){this.stateMouseLeaveListeners.push(e)}removeStateMouseLeaveListener(e){this.stateMouseLeaveListeners=this.stateMouseLeaveListeners.filter(t=>t!==e)}processData(){this.annotatedStates.length=0;for(let e=0;e<this.states.length;e++){let t=this.states[e],i=this.statesById.get(t);i===void 0&&(i="state_band_"+pt++);let r;e+1<this.states.length?r=this.states[e+1].time:r=1/0;let n=b(w({},t),{start:t.time,stop:r,hovered:!1,region:{id:i,parentId:this.bandRegionId,cursor:this.stateCursor,click:()=>{this.stateClickListeners.forEach(o=>o({state:t}))},mouseEnter:o=>{n.hovered=!0,this.reportMutation(),this.stateMouseMoveListeners.forEach(s=>s({clientX:o.clientX,clientY:o.clientY,state:t}))},mouseMove:o=>{this.stateMouseMoveListeners.forEach(s=>s({clientX:o.clientX,clientY:o.clientY,state:t}))},mouseLeave:o=>{n.hovered=!1,this.reportMutation(),this.stateMouseLeaveListeners.forEach(s=>s({clientX:o.clientX,clientY:o.clientY,state:t}))}}});this.annotatedStates.push(n)}this.statesById.clear();for(let e of this.annotatedStates)this.statesById.set(e,e.region.id)}calculateContentHeight(e){return this._contentHeight}drawBandContent(e){for(let t of this.annotatedStates)this.measureState(e,t),this.drawState(e,t);if(this.stateDividerWidth){let t;for(let i of this.annotatedStates)if(i.drawInfo){let{startX:r,stopX:n}=i.drawInfo;r=Math.round(r),n=Math.round(n),(!t||t!==r)&&(e.strokePath({path:new c(r+.5,0).lineTo(r+.5,this.contentHeight),color:this.stateDividerColor,lineWidth:this.stateDividerWidth,dash:this.stateDividerDash}),t=r),(!t||t!==n)&&(e.strokePath({path:new c(n-.5,0).lineTo(n-.5,this.contentHeight),color:this.stateDividerColor,lineWidth:this.stateDividerWidth,dash:this.stateDividerDash}),t=n)}}}measureState(e,t){if(t.label===null)return;if(t.start>this.timeline.stop||t.stop<this.timeline.start){t.drawInfo=void 0;return}let i=t.textSize??this.stateTextSize,r=t.fontFamily??this.stateFontFamily,n=this.timeline.positionTime(t.start),o=this.timeline.positionTime(t.stop),s=t.label||"",a=n+this.statePaddingLeft;t.start<this.timeline.start&&t.stop>this.timeline.start&&(s="\u25C0"+s,a=this.timeline.positionTime(this.timeline.start));let l=e.measureText(s,`${i}px ${r}`);o-a>=l.width||(s=""),t.drawInfo={startX:n,stopX:o,textX:a,text:s}}drawState(e,t){if(!t.drawInfo)return;let{startX:i,stopX:r,textX:n,text:o}=t.drawInfo,s=t.background??this.stateBackground,a=t.hoverBackground??this.stateHoverBackground,l=t.textColor??this.stateTextColor,h=t.textSize??this.stateTextSize,d=t.fontFamily??this.stateFontFamily;i==-1/0&&(i=this.timeline.positionTime(this.timeline.start)),r==1/0&&(r=this.timeline.positionTime(this.timeline.stop));let u={x:Math.round(i),y:0,width:Math.round(r-Math.round(i)),height:this.contentHeight};if(e.fillRect(b(w({},u),{fill:s})),t.hovered&&e.fillRect(b(w({},u),{fill:a})),e.addHitRegion(t.region).addRect(u.x,u.y,u.width,u.height),o){let m=u.y+u.height/2;e.fillText({x:n,y:m,text:o,font:`${h}px ${d}`,baseline:"middle",align:"left",color:l})}}get contentHeight(){return this._contentHeight}set contentHeight(e){this._contentHeight=e,this.reportMutation()}get states(){return this._states}set states(e){this._states=e,this.processData(),this.reportMutation()}get stateBackground(){return this._stateBackground}set stateBackground(e){this._stateBackground=e,this.reportMutation()}get stateDividerColor(){return this._stateDividerColor}set stateDividerColor(e){this._stateDividerColor=e,this.reportMutation()}get stateDividerWidth(){return this._stateDividerWidth}set stateDividerWidth(e){this._stateDividerWidth=e,this.reportMutation()}get stateDividerDash(){return this._stateDividerDash}set stateDividerDash(e){this._stateDividerDash=e,this.reportMutation()}get stateTextColor(){return this._stateTextColor}set stateTextColor(e){this._stateTextColor=e,this.reportMutation()}get stateTextSize(){return this._stateTextSize}set stateTextSize(e){this._stateTextSize=e,this.reportMutation()}get stateFontFamily(){return this._stateFontFamily}set stateFontFamily(e){this._stateFontFamily=e,this.reportMutation()}get statePaddingLeft(){return this._statePaddingLeft}set statePaddingLeft(e){this._statePaddingLeft=e,this.reportMutation()}get stateCursor(){return this._stateCursor}set stateCursor(e){this._stateCursor=e,this.reportMutation()}get stateHoverBackground(){return this._stateHoverBackground}set stateHoverBackground(e){this._stateHoverBackground=e,this.reportMutation()}},vt=Math.pow(10,8)*24*60*60*1e3,Er=-vt,Ye=6048e5,xt=864e5,wt=6e4,bt=36e5,Mt=3600,Ie=Mt*24,zr=Ie*7,yt=Ie*365.2425,Tt=yt/12,Rr=Tt*3,ve=Symbol.for("constructDateFrom");function T(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&ve in e?e[ve](t):e instanceof Date?new e.constructor(t):new Date(t)}function x(e,t){return T(t||e,e)}function W(e,t,i){let r=x(e,i?.in);return isNaN(t)?T(i?.in||e,NaN):(t&&r.setDate(r.getDate()+t),r)}function U(e,t,i){let r=x(e,i?.in);if(isNaN(t))return T(i?.in||e,NaN);if(!t)return r;let n=r.getDate(),o=T(i?.in||e,r.getTime());o.setMonth(r.getMonth()+t+1,0);let s=o.getDate();return n>=s?o:(r.setFullYear(o.getFullYear(),o.getMonth(),n),r)}function I(e,t,i){return T(i?.in||e,+x(e)+t)}function Z(e,t,i){return I(e,t*bt,i)}var Ct={};function O(){return Ct}function z(e,t){let i=O(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,n=x(e,t?.in),o=n.getDay(),s=(o<r?7:0)+o-r;return n.setDate(n.getDate()-s),n.setHours(0,0,0,0),n}function q(e,t){return z(e,b(w({},t),{weekStartsOn:1}))}function Oe(e,t){let i=x(e,t?.in),r=i.getFullYear(),n=T(i,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);let o=q(n),s=T(i,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);let a=q(s);return i.getTime()>=o.getTime()?r+1:i.getTime()>=a.getTime()?r:r-1}function xe(e){let t=x(e),i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return i.setUTCFullYear(t.getFullYear()),+e-+i}function Lt(e,...t){let i=T.bind(null,e||t.find(r=>typeof r=="object"));return t.map(i)}function ae(e,t){let i=x(e,t?.in);return i.setHours(0,0,0,0),i}function _t(e,t,i){let[r,n]=Lt(i?.in,e,t),o=ae(r),s=ae(n),a=+o-xe(o),l=+s-xe(s);return Math.round((a-l)/xt)}function kt(e,t){let i=Oe(e,t),r=T(t?.in||e,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),q(r)}function le(e,t,i){let r=x(e,i?.in);return r.setTime(r.getTime()+t*wt),r}function K(e,t,i){return I(e,t*1e3,i)}function St(e,t,i){return W(e,t*7,i)}function Ne(e,t,i){return U(e,t*12,i)}function Dt(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Pt(e){return!(!Dt(e)&&typeof e!="number"||isNaN(+x(e)))}function Bt(e,t){let i=x(e,t?.in);return i.setDate(1),i.setHours(0,0,0,0),i}function Ue(e,t){let i=x(e,t?.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}var Wt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ht=(e,t,i)=>{let r,n=Wt[e];return typeof n=="string"?r=n:t===1?r=n.one:r=n.other.replace("{{count}}",t.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"in "+r:r+" ago":r};function ee(e){return(t={})=>{let i=t.width?String(t.width):e.defaultWidth;return e.formats[i]||e.formats[e.defaultWidth]}}var Ft={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Et={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Rt={date:ee({formats:Ft,defaultWidth:"full"}),time:ee({formats:Et,defaultWidth:"full"}),dateTime:ee({formats:zt,defaultWidth:"full"})},$t={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Xt=(e,t,i,r)=>$t[e];function X(e){return(t,i)=>{let r=i?.context?String(i.context):"standalone",n;if(r==="formatting"&&e.formattingValues){let s=e.defaultFormattingWidth||e.defaultWidth,a=i?.width?String(i.width):s;n=e.formattingValues[a]||e.formattingValues[s]}else{let s=e.defaultWidth,a=i?.width?String(i.width):e.defaultWidth;n=e.values[a]||e.values[s]}let o=e.argumentCallback?e.argumentCallback(t):t;return n[o]}}var Yt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},It={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ot={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Nt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ut={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},At=(e,t)=>{let i=Number(e),r=i%100;if(r>20||r<10)switch(r%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},jt={ordinalNumber:At,era:X({values:Yt,defaultWidth:"wide"}),quarter:X({values:It,defaultWidth:"wide",argumentCallback:e=>e-1}),month:X({values:Ot,defaultWidth:"wide"}),day:X({values:Nt,defaultWidth:"wide"}),dayPeriod:X({values:Ut,defaultWidth:"wide",formattingValues:qt,defaultFormattingWidth:"wide"})};function Y(e){return(t,i={})=>{let r=i.width,n=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(n);if(!o)return null;let s=o[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?Kt(a,u=>u.test(s)):Zt(a,u=>u.test(s)),h;h=e.valueCallback?e.valueCallback(l):l,h=i.valueCallback?i.valueCallback(h):h;let d=t.slice(s.length);return{value:h,rest:d}}}function Zt(e,t){for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return i}function Kt(e,t){for(let i=0;i<e.length;i++)if(t(e[i]))return i}function Gt(e){return(t,i={})=>{let r=t.match(e.matchPattern);if(!r)return null;let n=r[0],o=t.match(e.parsePattern);if(!o)return null;let s=e.valueCallback?e.valueCallback(o[0]):o[0];s=i.valueCallback?i.valueCallback(s):s;let a=t.slice(n.length);return{value:s,rest:a}}}var Vt=/^(\d+)(th|st|nd|rd)?/i,Qt=/\d+/i,Jt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ei={any:[/^b/i,/^(a|c)/i]},ti={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ii={any:[/1/i,/2/i,/3/i,/4/i]},ri={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ni={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oi={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},si={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ai={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},li={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},hi={ordinalNumber:Gt({matchPattern:Vt,parsePattern:Qt,valueCallback:e=>parseInt(e,10)}),era:Y({matchPatterns:Jt,defaultMatchWidth:"wide",parsePatterns:ei,defaultParseWidth:"any"}),quarter:Y({matchPatterns:ti,defaultMatchWidth:"wide",parsePatterns:ii,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Y({matchPatterns:ri,defaultMatchWidth:"wide",parsePatterns:ni,defaultParseWidth:"any"}),day:Y({matchPatterns:oi,defaultMatchWidth:"wide",parsePatterns:si,defaultParseWidth:"any"}),dayPeriod:Y({matchPatterns:ai,defaultMatchWidth:"any",parsePatterns:li,defaultParseWidth:"any"})},f={code:"en-US",formatDistance:Ht,formatLong:Rt,formatRelative:Xt,localize:jt,match:hi,options:{weekStartsOn:0,firstWeekContainsDate:1}};function di(e,t){let i=x(e,t?.in);return _t(i,Ue(i))+1}function ui(e,t){let i=x(e,t?.in),r=+q(i)-+kt(i);return Math.round(r/Ye)+1}function qe(e,t){let i=x(e,t?.in),r=i.getFullYear(),n=O(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=T(t?.in||e,0);s.setFullYear(r+1,0,o),s.setHours(0,0,0,0);let a=z(s,t),l=T(t?.in||e,0);l.setFullYear(r,0,o),l.setHours(0,0,0,0);let h=z(l,t);return+i>=+a?r+1:+i>=+h?r:r-1}function ci(e,t){let i=O(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,n=qe(e,t),o=T(t?.in||e,0);return o.setFullYear(n,0,r),o.setHours(0,0,0,0),z(o,t)}function mi(e,t){let i=x(e,t?.in),r=+z(i,t)-+ci(i,t);return Math.round(r/Ye)+1}function g(e,t){let i=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return i+r}var D={y(e,t){let i=e.getFullYear(),r=i>0?i:1-i;return g(t==="yy"?r%100:r,t.length)},M(e,t){let i=e.getMonth();return t==="M"?String(i+1):g(i+1,2)},d(e,t){return g(e.getDate(),t.length)},a(e,t){let i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h(e,t){return g(e.getHours()%12||12,t.length)},H(e,t){return g(e.getHours(),t.length)},m(e,t){return g(e.getMinutes(),t.length)},s(e,t){return g(e.getSeconds(),t.length)},S(e,t){let i=t.length,r=e.getMilliseconds(),n=Math.trunc(r*Math.pow(10,i-3));return g(n,t.length)}},F={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},we={G:function(e,t,i){let r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return i.era(r,{width:"abbreviated"});case"GGGGG":return i.era(r,{width:"narrow"});case"GGGG":default:return i.era(r,{width:"wide"})}},y:function(e,t,i){if(t==="yo"){let r=e.getFullYear(),n=r>0?r:1-r;return i.ordinalNumber(n,{unit:"year"})}return D.y(e,t)},Y:function(e,t,i,r){let n=qe(e,r),o=n>0?n:1-n;if(t==="YY"){let s=o%100;return g(s,2)}return t==="Yo"?i.ordinalNumber(o,{unit:"year"}):g(o,t.length)},R:function(e,t){let i=Oe(e);return g(i,t.length)},u:function(e,t){let i=e.getFullYear();return g(i,t.length)},Q:function(e,t,i){let r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return g(r,2);case"Qo":return i.ordinalNumber(r,{unit:"quarter"});case"QQQ":return i.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,i){let r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return g(r,2);case"qo":return i.ordinalNumber(r,{unit:"quarter"});case"qqq":return i.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,i){let r=e.getMonth();switch(t){case"M":case"MM":return D.M(e,t);case"Mo":return i.ordinalNumber(r+1,{unit:"month"});case"MMM":return i.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,i){let r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return g(r+1,2);case"Lo":return i.ordinalNumber(r+1,{unit:"month"});case"LLL":return i.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,i,r){let n=mi(e,r);return t==="wo"?i.ordinalNumber(n,{unit:"week"}):g(n,t.length)},I:function(e,t,i){let r=ui(e);return t==="Io"?i.ordinalNumber(r,{unit:"week"}):g(r,t.length)},d:function(e,t,i){return t==="do"?i.ordinalNumber(e.getDate(),{unit:"date"}):D.d(e,t)},D:function(e,t,i){let r=di(e);return t==="Do"?i.ordinalNumber(r,{unit:"dayOfYear"}):g(r,t.length)},E:function(e,t,i){let r=e.getDay();switch(t){case"E":case"EE":case"EEE":return i.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(r,{width:"short",context:"formatting"});case"EEEE":default:return i.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,i,r){let n=e.getDay(),o=(n-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return g(o,2);case"eo":return i.ordinalNumber(o,{unit:"day"});case"eee":return i.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,i,r){let n=e.getDay(),o=(n-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return g(o,t.length);case"co":return i.ordinalNumber(o,{unit:"day"});case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,i){let r=e.getDay(),n=r===0?7:r;switch(t){case"i":return String(n);case"ii":return g(n,t.length);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return i.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(r,{width:"short",context:"formatting"});case"iiii":default:return i.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,i){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,i){let r=e.getHours(),n;switch(r===12?n=F.noon:r===0?n=F.midnight:n=r/12>=1?"pm":"am",t){case"b":case"bb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,i){let r=e.getHours(),n;switch(r>=17?n=F.evening:r>=12?n=F.afternoon:r>=4?n=F.morning:n=F.night,t){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,i){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),i.ordinalNumber(r,{unit:"hour"})}return D.h(e,t)},H:function(e,t,i){return t==="Ho"?i.ordinalNumber(e.getHours(),{unit:"hour"}):D.H(e,t)},K:function(e,t,i){let r=e.getHours()%12;return t==="Ko"?i.ordinalNumber(r,{unit:"hour"}):g(r,t.length)},k:function(e,t,i){let r=e.getHours();return r===0&&(r=24),t==="ko"?i.ordinalNumber(r,{unit:"hour"}):g(r,t.length)},m:function(e,t,i){return t==="mo"?i.ordinalNumber(e.getMinutes(),{unit:"minute"}):D.m(e,t)},s:function(e,t,i){return t==="so"?i.ordinalNumber(e.getSeconds(),{unit:"second"}):D.s(e,t)},S:function(e,t){return D.S(e,t)},X:function(e,t,i){let r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return Me(r);case"XXXX":case"XX":return B(r);case"XXXXX":case"XXX":default:return B(r,":")}},x:function(e,t,i){let r=e.getTimezoneOffset();switch(t){case"x":return Me(r);case"xxxx":case"xx":return B(r);case"xxxxx":case"xxx":default:return B(r,":")}},O:function(e,t,i){let r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+be(r,":");case"OOOO":default:return"GMT"+B(r,":")}},z:function(e,t,i){let r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+be(r,":");case"zzzz":default:return"GMT"+B(r,":")}},t:function(e,t,i){let r=Math.trunc(+e/1e3);return g(r,t.length)},T:function(e,t,i){return g(+e,t.length)}};function be(e,t=""){let i=e>0?"-":"+",r=Math.abs(e),n=Math.trunc(r/60),o=r%60;return o===0?i+String(n):i+String(n)+t+g(o,2)}function Me(e,t){return e%60===0?(e>0?"-":"+")+g(Math.abs(e)/60,2):B(e,t)}function B(e,t=""){let i=e>0?"-":"+",r=Math.abs(e),n=g(Math.trunc(r/60),2),o=g(r%60,2);return i+n+t+o}var ye=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Ae=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},gi=(e,t)=>{let i=e.match(/(P+)(p+)?/)||[],r=i[1],n=i[2];if(!n)return ye(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",ye(r,t)).replace("{{time}}",Ae(n,t))},fi={p:Ae,P:gi},pi=/^D+$/,vi=/^Y+$/,xi=["D","DD","YY","YYYY"];function wi(e){return pi.test(e)}function bi(e){return vi.test(e)}function Mi(e,t,i){let r=yi(e,t,i);if(console.warn(r),xi.includes(e))throw new RangeError(r)}function yi(e,t,i){let r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var Ti=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ci=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Li=/^'([^]*?)'?$/,_i=/''/g,ki=/[a-zA-Z]/;function Si(e,t,i){let r=O(),n=i?.locale??r.locale??f,o=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=x(e,i?.in);if(!Pt(a))throw new RangeError("Invalid time value");let l=t.match(Ci).map(d=>{let u=d[0];if(u==="p"||u==="P"){let m=fi[u];return m(d,n.formatLong)}return d}).join("").match(Ti).map(d=>{if(d==="''")return{isToken:!1,value:"'"};let u=d[0];if(u==="'")return{isToken:!1,value:Di(d)};if(we[u])return{isToken:!0,value:d};if(u.match(ki))throw new RangeError("Format string contains an unescaped latin alphabet character `"+u+"`");return{isToken:!1,value:d}});n.localize.preprocessor&&(l=n.localize.preprocessor(a,l));let h={firstWeekContainsDate:o,weekStartsOn:s,locale:n};return l.map(d=>{if(!d.isToken)return d.value;let u=d.value;(!i?.useAdditionalWeekYearTokens&&bi(u)||!i?.useAdditionalDayOfYearTokens&&wi(u))&&Mi(u,t,String(e));let m=we[u[0]];return m(a,u,n.localize,h)}).join("")}function Di(e){let t=e.match(Li);return t?t[1].replace(_i,"'"):e}function Pi(){return Object.assign({},O())}function Bi(e,t){let i=x(e,t?.in);return i.setMinutes(0,0,0),i}function Wi(e,t){let i=x(e,t?.in);return i.setSeconds(0,0),i}function Hi(e,t,i){let r=x(e,i?.in);return r.setHours(t),r}function Fi(e,t,i){let r=x(e,i?.in);return r.setMinutes(t),r}function Ei(e,t){let i=x(e,t?.in),r=i.getFullYear(),n=Math.floor(r/10)*10;return i.setFullYear(n,0,1),i.setHours(0,0,0,0),i}function Te(e,t,i){let r=Pi(),n=$i(e,i.timeZone,i.locale??r.locale);return"formatToParts"in n?zi(n,t):Ri(n,t)}function zi(e,t){let i=e.formatToParts(t);for(let r=i.length-1;r>=0;--r)if(i[r].type==="timeZoneName")return i[r].value}function Ri(e,t){let i=e.format(t).replace(/\u200E/g,""),r=/ [\w-+ ]+$/.exec(i);return r?r[0].substr(1):""}function $i(e,t,i){return new Intl.DateTimeFormat(i?[i.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}function Xi(e,t){let i=Ui(t);return"formatToParts"in i?Ii(i,e):Oi(i,e)}var Yi={year:0,month:1,day:2,hour:3,minute:4,second:5};function Ii(e,t){try{let i=e.formatToParts(t),r=[];for(let n=0;n<i.length;n++){let o=Yi[i[n].type];o!==void 0&&(r[o]=parseInt(i[n].value,10))}return r}catch(i){if(i instanceof RangeError)return[NaN];throw i}}function Oi(e,t){let i=e.format(t),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(i);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}var te={},Ce=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),Ni=Ce==="06/25/2014, 00:00:00"||Ce==="\u200E06\u200E/\u200E25\u200E/\u200E2014\u200E \u200E00\u200E:\u200E00\u200E:\u200E00";function Ui(e){return te[e]||(te[e]=Ni?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),te[e]}function ue(e,t,i,r,n,o,s){let a=new Date(0);return a.setUTCFullYear(e,t,i),a.setUTCHours(r,n,o,s),a}var Le=36e5,qi=6e4,ie={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function G(e,t,i){if(!e)return 0;let r=ie.timezoneZ.exec(e);if(r)return 0;let n,o;if(r=ie.timezoneHH.exec(e),r)return n=parseInt(r[1],10),_e(n)?-(n*Le):NaN;if(r=ie.timezoneHHMM.exec(e),r){n=parseInt(r[2],10);let s=parseInt(r[3],10);return _e(n,s)?(o=Math.abs(n)*Le+s*qi,r[1]==="+"?-o:o):NaN}if(Zi(e)){t=new Date(t||Date.now());let s=i?t:Ai(t),a=he(s,e);return-(i?a:ji(t,a,e))}return NaN}function Ai(e){return ue(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function he(e,t){let i=Xi(e,t),r=ue(i[0],i[1]-1,i[2],i[3]%24,i[4],i[5],0).getTime(),n=e.getTime(),o=n%1e3;return n-=o>=0?o:1e3+o,r-n}function ji(e,t,i){let r=e.getTime()-t,n=he(new Date(r),i);if(t===n)return t;r-=n-t;let o=he(new Date(r),i);return n===o?n:Math.max(n,o)}function _e(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var ke={};function Zi(e){if(ke[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),ke[e]=!0,!0}catch{return!1}}var Ki=60*1e3,Gi={X:function(e,t,i){let r=re(i.timeZone,e);if(r===0)return"Z";switch(t){case"X":return Se(r);case"XXXX":case"XX":return E(r);case"XXXXX":case"XXX":default:return E(r,":")}},x:function(e,t,i){let r=re(i.timeZone,e);switch(t){case"x":return Se(r);case"xxxx":case"xx":return E(r);case"xxxxx":case"xxx":default:return E(r,":")}},O:function(e,t,i){let r=re(i.timeZone,e);switch(t){case"O":case"OO":case"OOO":return"GMT"+Vi(r,":");case"OOOO":default:return"GMT"+E(r,":")}},z:function(e,t,i){switch(t){case"z":case"zz":case"zzz":return Te("short",e,i);case"zzzz":default:return Te("long",e,i)}}};function re(e,t){let i=e?G(e,t,!0)/Ki:t?.getTimezoneOffset()??0;if(Number.isNaN(i))throw new RangeError("Invalid time zone specified: "+e);return i}function A(e,t){let i=e<0?"-":"",r=Math.abs(e).toString();for(;r.length<t;)r="0"+r;return i+r}function E(e,t=""){let i=e>0?"-":"+",r=Math.abs(e),n=A(Math.floor(r/60),2),o=A(Math.floor(r%60),2);return i+n+t+o}function Se(e,t){return e%60===0?(e>0?"-":"+")+A(Math.abs(e)/60,2):E(e,t)}function Vi(e,t=""){let i=e>0?"-":"+",r=Math.abs(e),n=Math.floor(r/60),o=r%60;return o===0?i+String(n):i+String(n)+t+A(o,2)}function De(e){let t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}var je=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,ne=36e5,Pe=6e4,Qi=2,y={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:je};function j(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);let i=t.additionalDigits==null?Qi:Number(t.additionalDigits);if(i!==2&&i!==1&&i!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(Object.prototype.toString.call(e)!=="[object String]")return new Date(NaN);let r=Ji(e),{year:n,restDateString:o}=er(r.date,i),s=tr(o,n);if(s===null||isNaN(s.getTime()))return new Date(NaN);if(s){let a=s.getTime(),l=0,h;if(r.time&&(l=ir(r.time),l===null||isNaN(l)))return new Date(NaN);if(r.timeZone||t.timeZone){if(h=G(r.timeZone||t.timeZone,new Date(a+l)),isNaN(h))return new Date(NaN)}else h=De(new Date(a+l)),h=De(new Date(a+l+h));return new Date(a+l+h)}else return new Date(NaN)}function Ji(e){let t={},i=y.dateTimePattern.exec(e),r;if(i?(t.date=i[1],r=i[3]):(i=y.datePattern.exec(e),i?(t.date=i[1],r=i[2]):(t.date=null,r=e)),r){let n=y.timeZone.exec(r);n?(t.time=r.replace(n[1],""),t.timeZone=n[1].trim()):t.time=r}return t}function er(e,t){if(e){let i=y.YYY[t],r=y.YYYYY[t],n=y.YYYY.exec(e)||r.exec(e);if(n){let o=n[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(n=y.YY.exec(e)||i.exec(e),n){let o=n[1];return{year:parseInt(o,10)*100,restDateString:e.slice(o.length)}}}return{year:null}}function tr(e,t){if(t===null)return null;let i,r,n;if(!e||!e.length)return i=new Date(0),i.setUTCFullYear(t),i;let o=y.MM.exec(e);if(o)return i=new Date(0),r=parseInt(o[1],10)-1,We(t,r)?(i.setUTCFullYear(t,r),i):new Date(NaN);if(o=y.DDD.exec(e),o){i=new Date(0);let s=parseInt(o[1],10);return or(t,s)?(i.setUTCFullYear(t,0,s),i):new Date(NaN)}if(o=y.MMDD.exec(e),o){i=new Date(0),r=parseInt(o[1],10)-1;let s=parseInt(o[2],10);return We(t,r,s)?(i.setUTCFullYear(t,r,s),i):new Date(NaN)}if(o=y.Www.exec(e),o)return n=parseInt(o[1],10)-1,He(n)?Be(t,n):new Date(NaN);if(o=y.WwwD.exec(e),o){n=parseInt(o[1],10)-1;let s=parseInt(o[2],10)-1;return He(n,s)?Be(t,n,s):new Date(NaN)}return null}function ir(e){let t,i,r=y.HH.exec(e);if(r)return t=parseFloat(r[1].replace(",",".")),oe(t)?t%24*ne:NaN;if(r=y.HHMM.exec(e),r)return t=parseInt(r[1],10),i=parseFloat(r[2].replace(",",".")),oe(t,i)?t%24*ne+i*Pe:NaN;if(r=y.HHMMSS.exec(e),r){t=parseInt(r[1],10),i=parseInt(r[2],10);let n=parseFloat(r[3].replace(",","."));return oe(t,i,n)?t%24*ne+i*Pe+n*1e3:NaN}return null}function Be(e,t,i){t=t||0,i=i||0;let r=new Date(0);r.setUTCFullYear(e,0,4);let n=r.getUTCDay()||7,o=t*7+i+1-n;return r.setUTCDate(r.getUTCDate()+o),r}var rr=[31,28,31,30,31,30,31,31,30,31,30,31],nr=[31,29,31,30,31,30,31,31,30,31,30,31];function Ze(e){return e%400===0||e%4===0&&e%100!==0}function We(e,t,i){if(t<0||t>11)return!1;if(i!=null){if(i<1)return!1;let r=Ze(e);if(r&&i>nr[t]||!r&&i>rr[t])return!1}return!0}function or(e,t){if(t<1)return!1;let i=Ze(e);return!(i&&t>366||!i&&t>365)}function He(e,t){return!(e<0||e>52||t!=null&&(t<0||t>6))}function oe(e,t,i){return!(e<0||e>=25||t!=null&&(t<0||t>=60)||i!=null&&(i<0||i>=60))}var sr=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function ar(e,t,i={}){t=String(t);let r=t.match(sr);if(r){let n=j(i.originalDate||e,i);t=r.reduce(function(o,s){if(s[0]==="'")return o;let a=o.indexOf(s),l=o[a-1]==="'",h=o.replace(s,"'"+Gi[s[0]](n,s,i)+"'");return l?h.substring(0,a-1)+h.substring(a+1):h},t)}return Si(e,t,i)}function _(e,t,i){e=j(e,i);let r=G(t,e,!0),n=new Date(e.getTime()-r),o=new Date(0);return o.setFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()),o.setHours(n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()),o}function p(e,t,i,r){return r=b(w({},r),{timeZone:t,originalDate:e}),ar(_(e,t,{timeZone:r.timeZone}),i,r)}function S(e,t,i){if(typeof e=="string"&&!e.match(je))return j(e,b(w({},i),{timeZone:t}));e=j(e,i);let r=ue(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()).getTime(),n=G(t,new Date(r));return new Date(r+n)}function R(e,t){return e=_(e,t),e=Wi(e),S(e,t)}function ce(e,t){return e=_(e,t),e=Bi(e),S(e,t)}function V(e,t){return e=_(e,t),e=ae(e),S(e,t)}function Ke(e,t){return e=_(e,t),e=z(e,{weekStartsOn:1}),S(e,t)}function lr(e,t){return e=_(e,t),e=Bt(e),S(e,t)}function Ge(e,t){return e=_(e,t),e=Ue(e),S(e,t)}function hr(e,t){return e=_(e,t),e=Ei(e),S(e,t)}function dr(e,t,i){return e=_(e,i),e=Hi(e,t),S(e,i)}function me(e,t,i){return e=_(e,i),e=Fi(e,t),S(e,i)}var $r=class extends P{_contentHeight=30;_textColor="grey";_tickColor="#888888";_fullHeight;_timezone;_scale="auto";tenMillisecondsScale=new ur;hundredMillisecondsScale=new cr;twoHundredMillisecondsScale=new mr;secondScale=new gr;fiveSecondsScale=new fr;tenSecondsScale=new pr;halfMinuteScale=new vr;minuteScale=new xr;fiveMinutesScale=new wr;tenMinutesScale=new br;halfHourScale=new Mr;hourScale=new yr;quarterDayScale=new Tr;weekDayScale=new Cr;weekScale=new Lr;monthScale=new _r;yearScale=new kr;decadeScale=new Sr;orderedScales=[this.decadeScale,this.yearScale,this.monthScale,this.weekScale,this.weekDayScale,this.quarterDayScale,this.hourScale,this.halfHourScale,this.tenMinutesScale,this.fiveMinutesScale,this.minuteScale,this.halfMinuteScale,this.tenSecondsScale,this.fiveSecondsScale,this.secondScale,this.twoHundredMillisecondsScale,this.hundredMillisecondsScale,this.tenMillisecondsScale];scaleRenderer;calculateContentHeight(e){return this.contentHeight}drawBandContent(e){this.scaleRenderer=this.determineScale(),this.scaleRenderer.drawBandContent(e,this)}drawUnderlay(e){this.fullHeight==="underlay"&&this.scaleRenderer?.drawFullHeightTicks&&this.scaleRenderer.drawFullHeightTicks(e,this)}drawOverlay(e){this.fullHeight==="overlay"&&this.scaleRenderer?.drawFullHeightTicks&&this.scaleRenderer.drawFullHeightTicks(e,this)}get contentHeight(){return this._contentHeight}set contentHeight(e){this._contentHeight=e,this.reportMutation()}get fullHeight(){return this._fullHeight}set fullHeight(e){this._fullHeight=e,this.reportMutation()}get textColor(){return this._textColor}set textColor(e){this._textColor=e,this.reportMutation()}get tickColor(){return this._tickColor}set tickColor(e){this._tickColor=e,this.reportMutation()}get timezone(){return this._timezone}set timezone(e){this._timezone=e,this.reportMutation()}get scale(){return this._scale}set scale(e){this._scale=e,this.reportMutation()}determineScale(){switch(this._scale){case"tenMilliseconds":return this.tenMillisecondsScale;case"hundredMilliseconds":return this.hundredMillisecondsScale;case"twoHundredMilliseconds":return this.twoHundredMillisecondsScale;case"second":return this.secondScale;case"fiveSeconds":return this.fiveSecondsScale;case"tenSeconds":return this.tenSecondsScale;case"halfMinute":return this.halfMinuteScale;case"minute":return this.minuteScale;case"fiveMinutes":return this.fiveMinutesScale;case"tenMinutes":return this.tenMinutesScale;case"halfHour":return this.halfHourScale;case"hour":return this.hourScale;case"quarterDay":return this.quarterDayScale;case"weekDay":return this.weekDayScale;case"week":return this.weekScale;case"month":return this.monthScale;case"year":return this.yearScale;case"decade":return this.decadeScale}let e=this.orderedScales[0];for(let t=1;t<this.orderedScales.length;t++){let i=this.orderedScales[t];if(i.measureUnitWidth(this)>=i.getPreferredUnitWidth())e=i;else break}return e}},ur=class{getPreferredUnitWidth(){return 110}measureUnitWidth(e){let t=e.timeline.start,i=t+10;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=R(i,r);let n=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(s)+.5,n-4).lineTo(Math.round(s)+.5,n)});let a=t.timeline.positionTime(i.getTime());e.fillText({x:a,y:n/2,text:p(i,r,"HH:mm:ss.SSS",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"center"}),i=I(i,10)}}},cr=class{getPreferredUnitWidth(){return 100}measureUnitWidth(e){let t=e.timeline.start,i=t+100;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=R(i,r);let n=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(s)+.5,n-4).lineTo(Math.round(s)+.5,n)});let a=t.timeline.positionTime(i.getTime());e.fillText({x:a,y:n/2,text:p(i,r,"HH:mm:ss.SSS",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"center"}),i=I(i,100)}}},mr=class{getPreferredUnitWidth(){return 97}measureUnitWidth(e){let t=e.timeline.start,i=t+200;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=R(i,r);let n=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(s)+.5,n-4).lineTo(Math.round(s)+.5,n)});let a=t.timeline.positionTime(i.getTime());e.fillText({x:a,y:n/2,text:p(i,r,"HH:mm:ss.SSS",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"center"}),i=I(i,200)}}},gr=class{getPreferredUnitWidth(){return 95}measureUnitWidth(e){let t=e.timeline.start,i=t+1e3;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=R(i,r);let n=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(s)+.5,n-4).lineTo(Math.round(s)+.5,n)});let a=t.timeline.positionTime(i.getTime());e.fillText({x:a,y:n/2,text:p(i,r,"HH:mm:ss",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"center"}),i=K(i,1)}}},fr=class{getPreferredUnitWidth(){return 92}measureUnitWidth(e){let t=e.timeline.start,i=t+5e3;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=R(i,r);let n=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(s)+.5,n-4).lineTo(Math.round(s)+.5,n)});let a=t.timeline.positionTime(i.getTime());e.fillText({x:a,y:n/2,text:p(i,r,"HH:mm:ss",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"center"}),i=K(i,5)}}},pr=class{getPreferredUnitWidth(){return 90}measureUnitWidth(e){let t=e.timeline.start,i=t+1e4;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=R(i,r);let n=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(s)+.5,n-4).lineTo(Math.round(s)+.5,n)});let a=t.timeline.positionTime(i.getTime());e.fillText({x:a,y:n/2,text:p(i,r,"HH:mm:ss",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"center"}),i=K(i,10)}}},vr=class{getPreferredUnitWidth(){return 85}measureUnitWidth(e){let t=e.timeline.start,i=t+3e4;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=ce(i,r);let n=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(s)+.5,n-4).lineTo(Math.round(s)+.5,n)});let a=t.timeline.positionTime(i.getTime());e.fillText({x:a,y:n/2,text:p(i,r,"HH:mm:ss",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"center"}),i=K(i,30)}}},xr=class{getPreferredUnitWidth(){return 80}measureUnitWidth(e){let t=e.timeline.start,i=t+6e4;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=ce(i,r);let n=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(s)+.5,n-4).lineTo(Math.round(s)+.5,n)});let a=t.timeline.positionTime(i.getTime());e.fillText({x:a,y:n/2,text:p(i,r,"HH:mm",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"center"}),i=le(i,1)}}},wr=class{majorX=[];getPreferredUnitWidth(){return 65}measureUnitWidth(e){let t=e.timeline.start,i=t+3e5;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=V(i,r),this.majorX.length=0;let n=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());this.majorX.push(s),e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(s)+.5,0).lineTo(Math.round(s)+.5,n)}),e.fillText({x:s+2,y:n/4,text:p(i,r,"MMM dd",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"left"});for(let a=0;a<48*6;a++){let l=me(i,a*5,r);if(i.getTime()>t.timeline.stop)break;if(a!==0){let d=t.timeline.positionTime(l.getTime());e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(d)+.5,n-4).lineTo(Math.round(d)+.5,n)})}let h=t.timeline.positionTime(l.getTime());e.fillText({x:h,y:a===0?n*.75:n/2,text:p(l,r,"HH:mm",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"center"})}i=W(i,1)}}drawFullHeightTicks(e,t){let i=new c(0,0);for(let r of this.majorX)i.moveTo(Math.round(r)+.5,t.y+t.height),i.lineTo(Math.round(r)+.5,e.height);e.strokePath({color:t.timeline.bandBorderColor,path:i})}},br=class{majorX=[];getPreferredUnitWidth(){return 60}measureUnitWidth(e){let t=e.timeline.start,i=t+6e5;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=V(i,r),this.majorX.length=0;let n=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());this.majorX.push(s),e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(s)+.5,0).lineTo(Math.round(s)+.5,n)}),e.fillText({x:s+2,y:n/4,text:p(i,r,"MMM dd",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"left"});for(let a=0;a<48*3;a++){let l=me(i,a*10,r);if(i.getTime()>t.timeline.stop)break;if(a!==0){let d=t.timeline.positionTime(l.getTime());e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(d)+.5,n-4).lineTo(Math.round(d)+.5,n)})}let h=t.timeline.positionTime(l.getTime());e.fillText({x:h,y:a===0?n*.75:n/2,text:p(l,r,"HH:mm",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"center"})}i=W(i,1)}}drawFullHeightTicks(e,t){let i=new c(0,0);for(let r of this.majorX)i.moveTo(Math.round(r)+.5,t.y+t.height),i.lineTo(Math.round(r)+.5,e.height);e.strokePath({color:t.timeline.bandBorderColor,path:i})}},Mr=class{majorX=[];getPreferredUnitWidth(){return 50}measureUnitWidth(e){let t=e.timeline.start,i=t+18e5;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=V(i,r),this.majorX.length=0;let n=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());this.majorX.push(s),e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(s)+.5,0).lineTo(Math.round(s)+.5,n)}),e.fillText({x:s+2,y:n/4,text:p(i,r,"MMM dd",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"left"});for(let a=0;a<48;a++){let l=me(i,a*30,r);if(a!==0){let d=t.timeline.positionTime(l.getTime());e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(d)+.5,n-4).lineTo(Math.round(d)+.5,n)})}let h=t.timeline.positionTime(l.getTime());e.fillText({x:h,y:a===0?n*.75:n/2,text:p(l,r,"HH:mm",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"center"})}i=W(i,1)}}drawFullHeightTicks(e,t){let i=new c(0,0);for(let r of this.majorX)i.moveTo(Math.round(r)+.5,t.y+t.height),i.lineTo(Math.round(r)+.5,e.height);e.strokePath({color:t.timeline.bandBorderColor,path:i})}},yr=class{majorX=[];majorLabels=[];midX=[];minorX=[];getPreferredUnitWidth(){return 38}measureUnitWidth(e){let t=e.timeline.start,i=t+36e5;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=ce(i,r);let n=t.timeline.distanceBetween(i.getTime(),le(i,30).getTime()),o=t.timeline.distanceBetween(i.getTime(),le(i,15).getTime());for(this.majorX.length=0,this.majorLabels.length=0,this.midX.length=0,this.minorX.length=0;i.getTime()<=t.timeline.stop;){let h=t.timeline.positionTime(i.getTime());this.majorX.push(h),this.minorX.push(h+o),this.midX.push(h+n),this.minorX.push(h+n+o);let d=p(i,r,"HH",{locale:f});d==="00"&&(d=p(i,r,"MMM dd",{locale:f})),this.majorLabels.push(d),i=Z(i,1)}let s=e.height,a=new c(0,0);for(let h of this.majorX)a.moveTo(Math.round(h)+.5,0),a.lineTo(Math.round(h)+.5,s);for(let h of this.midX)a.moveTo(Math.round(h)+.5,s*.6),a.lineTo(Math.round(h)+.5,s);for(let h of this.minorX)a.moveTo(Math.round(h)+.5,s*.8),a.lineTo(Math.round(h)+.5,s);e.strokePath({color:t.tickColor,path:a});let l=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(let h=0;h<this.majorLabels.length;h++){let d=this.majorLabels[h],u=this.majorX[h];d.length>2?(e.fillText({x:u+2,y:s*.75,text:"00",font:l,color:t.textColor,baseline:"middle",align:"left"}),e.fillText({x:u+2,y:s/4,text:d,font:l,color:t.textColor,baseline:"middle",align:"left"})):e.fillText({x:u+2,y:s/2,text:d,font:l,color:t.textColor,baseline:"middle",align:"left"})}}drawFullHeightTicks(e,t){let i=new c(0,0);for(let r of this.majorX)i.moveTo(Math.round(r)+.5,t.y+t.height),i.lineTo(Math.round(r)+.5,e.height);e.strokePath({color:t.timeline.bandBorderColor,path:i})}},Tr=class{majorX=[];getPreferredUnitWidth(){return 30}measureUnitWidth(e){let t=e.timeline.start,i=t+6*36e5;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=V(i,r),this.majorX.length=0;let n=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());this.majorX.push(s),e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(s)+.5,0).lineTo(Math.round(s)+.5,n)}),e.fillText({x:s+2,y:n/4,text:p(i,r,"EEE dd/MM",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"left"});for(let a of[0,6,12,18]){let l=dr(i,a,r);if(a!==0){let d=t.timeline.positionTime(l.getTime());e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(d)+.5,n/2).lineTo(Math.round(d)+.5,n)})}let h=t.timeline.positionTime(Z(l,3).getTime());e.fillText({x:h,y:n*.75,text:p(l,r,"HH",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"center"})}i=W(i,1)}}drawFullHeightTicks(e,t){let i=new c(0,0);for(let r of this.majorX)i.moveTo(Math.round(r)+.5,t.y+t.height),i.lineTo(Math.round(r)+.5,e.height);e.strokePath({color:t.timeline.bandBorderColor,path:i})}},Cr=class{majorX=[];getPreferredUnitWidth(){return 20}measureUnitWidth(e){let t=e.timeline.start,i=t+24*36e5;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=Ke(i,r),this.majorX.length=0;let n=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());this.majorX.push(s),e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(s)+.5,0).lineTo(Math.round(s)+.5,n)}),e.fillText({x:s+2,y:n/4,text:p(i,r,"dd MMM, yy",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"left"});for(let a=0;a<7;a++){if(i=W(i,1),a!==6){let h=t.timeline.positionTime(i.getTime());e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(h)+.5,n/2).lineTo(Math.round(h)+.5,n)})}let l=t.timeline.positionTime(Z(i,12).getTime());e.fillText({x:l,y:n*.75,text:p(i,r,"EEEEE",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"center"})}}}drawFullHeightTicks(e,t){let i=new c(0,0);for(let r of this.majorX)i.moveTo(Math.round(r)+.5,t.y+t.height),i.lineTo(Math.round(r)+.5,e.height);e.strokePath({color:t.timeline.bandBorderColor,path:i})}},Lr=class{majorX=[];getPreferredUnitWidth(){return 50}measureUnitWidth(e){let t=e.timeline.start,i=t+7*24*36e5;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=lr(i,r),this.majorX.length=0;let n=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`,s=i;for(;i.getTime()<=t.timeline.stop;){let a=t.timeline.positionTime(i.getTime());this.majorX.push(a),e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(a)+.5,0).lineTo(Math.round(a)+.5,n/2)}),e.fillText({x:a+2,y:n/4,text:p(i,r,"LLLL",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"left"}),i=U(i,1)}for(i=Ke(s,r);i.getTime()<=t.timeline.stop;){let a=t.timeline.positionTime(i.getTime());e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(a)+.5,n/2).lineTo(Math.round(a)+.5,n)});let l=W(Z(i,12),3),h=t.timeline.positionTime(l.getTime());e.fillText({x:h,y:n*.75,text:p(i,r,"dd/MM",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"center"}),i=St(i,1)}}drawFullHeightTicks(e,t){let i=new c(0,0);for(let r of this.majorX)i.moveTo(Math.round(r)+.5,t.y+t.height),i.lineTo(Math.round(r)+.5,e.height);e.strokePath({color:t.timeline.bandBorderColor,path:i})}},_r=class{majorX=[];getPreferredUnitWidth(){return 32}measureUnitWidth(e){let t=e.timeline.start,i=t+30*24*36e5;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=Ge(i,r),this.majorX.length=0;let n=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());this.majorX.push(s),e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(s)+.5,0).lineTo(Math.round(s)+.5,n)}),e.fillText({x:s+2,y:n/4,text:p(i,r,"yyyy",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"left"});for(let a=0;a<12;a++){i=U(i,1);let l=t.timeline.positionTime(i.getTime());e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(l)+.5,n/2).lineTo(Math.round(l)+.5,n)});let h=U(i,1).getTime(),d=t.timeline.positionTime((i.getTime()+h)/2);e.fillText({x:d,y:n*.75,text:p(i,r,"LLL",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"center"})}}}drawFullHeightTicks(e,t){let i=new c(0,0);for(let r of this.majorX)i.moveTo(Math.round(r)+.5,t.y+t.height),i.lineTo(Math.round(r)+.5,e.height);e.strokePath({color:t.timeline.bandBorderColor,path:i})}},kr=class{getPreferredUnitWidth(){return 49}measureUnitWidth(e){let t=e.timeline.start,i=t+365*24*36e5;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=Ge(i,r);let n=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(s)+.5,0).lineTo(Math.round(s)+.5,n)}),e.fillText({x:s+2,y:n/2,text:p(i,r,"yyyy",{locale:f}),font:o,color:t.textColor,baseline:"middle",align:"left"}),i=Ne(i,1)}}drawFullHeightTicks(e,t){}},Sr=class{getPreferredUnitWidth(){return 49}measureUnitWidth(e){let t=e.timeline.start,i=t+10*365*24*36e5;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),r=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=hr(i,r);let n=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());e.strokePath({color:t.tickColor,path:new c(0,0).moveTo(Math.round(s)+.5,0).lineTo(Math.round(s)+.5,n)}),e.fillText({x:s+2,y:n/2,text:p(i,r,"yyyy",{locale:f})+"s",font:o,color:t.textColor,baseline:"middle",align:"left"}),i=Ne(i,10)}}drawFullHeightTicks(e,t){}};export{c as a,de as b,tt as c,pe as d,Dr as e,Pr as f,Br as g,Wr as h,ft as i,Hr as j,Fr as k,$r as l};
