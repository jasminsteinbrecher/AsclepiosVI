import{d as S}from"./chunk-6X2UVTWO.js";import{Db as x,Ib as v,If as y,Kf as w,La as g,Ma as h,R as l,Y as c,_ as f,jb as d,wa as u}from"./chunk-OXOWQRWE.js";var E=["expr"];function I(z,t,e){let s=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return z.replace(new RegExp(s,"g"),e)}var o=class o{constructor(t,e,s){this.sanitizer=t;this.router=e;this.yamcs=s;this.ref=d.required("expr")}ngAfterViewInit(){let t=this.expression,i=new S().compile("="+this.expression).getPVNames();for(let r=0;r<i.length;r++){let a,m=i[r].startsWith("raw://");m?a=i[r].substring(6):a=i[r];let n=i[r];this.relto&&(n=y.relativizePath(a,this.relto)),m&&(n="raw://"+n);let p;this.router.url.startsWith("/mdb/")?p=this.router.createUrlTree(["/mdb/parameters/",a],{queryParams:{c:this.yamcs.context}}).toString():p=this.router.createUrlTree(["/telemetry/parameters"+a],{queryParams:{c:this.yamcs.context}}).toString(),n=`<a class="ya-link" href="${p}" title="${i[r]}">${n}</a>`,t=I(t,`'${i[r]}'`,n)}let D=this.sanitizer.sanitize(l.HTML,t);this.ref().nativeElement.innerHTML=D||""}};o.\u0275fac=function(e){return new(e||o)(c(x),c(v),c(w))},o.\u0275cmp=f({type:o,selectors:[["app-expression"]],viewQuery:function(e,s){e&1&&g(s.ref,E,5),e&2&&h()},inputs:{expression:"expression",relto:"relto"},decls:2,vars:0,consts:[["expr",""]],template:function(e,s){e&1&&u(0,"span",null,0)},encapsulation:2,changeDetection:0});var C=o;export{C as a};
